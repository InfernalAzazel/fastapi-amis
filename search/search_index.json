{"config":{"lang":["zh","en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"FastAPI Amis","text":"<p>\u57fa\u4e8e FastAPI \u548c Amis \u7684 Python \u6846\u67b6\uff0c\u7528\u4e8e\u5feb\u901f\u6784\u5efa\u73b0\u4ee3\u5316\u7684\u7ba1\u7406\u540e\u53f0\u754c\u9762</p> <p> </p> <p>\u5b9e\u9a8c\u6027\u9879\u76ee</p> <p>\u76ee\u524d\u6b63\u5728\u5b9e\u9a8c\u4e2d\uff0c\u8bf7\u4e0d\u8981\u6295\u5165\u751f\u4ea7\u9879\u76ee</p>"},{"location":"#_1","title":"\u529f\u80fd\u7279\u6027","text":"<ul> <li>\ud83d\ude80 \u9ad8\u6027\u80fd - \u57fa\u4e8e FastAPI \u7684\u9ad8\u6027\u80fd Web \u6846\u67b6</li> <li>\ud83c\udfa8 \u4f4e\u4ee3\u7801 - \u96c6\u6210 Amis \u4f4e\u4ee3\u7801\u524d\u7aef\u6846\u67b6</li> <li>\ud83d\udcf1 \u54cd\u5e94\u5f0f\u8bbe\u8ba1 - \u652f\u6301\u591a\u7aef\u9002\u914d</li> <li>\ud83d\udd27 \u7075\u6d3b\u7ec4\u4ef6\u5316 - \u7075\u6d3b\u7684\u7ec4\u4ef6\u5316\u5f00\u53d1</li> <li>\ud83d\udcca \u4e30\u5bcc\u7ec4\u4ef6 - \u5185\u7f6e\u4e30\u5bcc\u7684\u8868\u5355\u3001\u8868\u683c\u3001\u56fe\u8868\u7ec4\u4ef6</li> <li>\ud83d\udee0\ufe0f \u53ef\u6269\u5c55 - \u652f\u6301\u81ea\u5b9a\u4e49\u8def\u7531\u548c\u89c6\u56fe</li> </ul>"},{"location":"#_2","title":"\u73af\u5883\u8981\u6c42","text":"<ul> <li>Python &gt;= 3.10</li> <li>uv (Python \u5305\u7ba1\u7406\u5668)</li> <li>FastAPI</li> <li>Uvicorn</li> </ul>"},{"location":"#_3","title":"\u5feb\u901f\u5b89\u88c5","text":"<p>\u4f7f\u7528 pip \u5b89\u88c5\uff1a</p> <pre><code>pip install fastapi-amis\n</code></pre> <p>\u4f7f\u7528 uv \u5b89\u88c5\uff1a</p> <pre><code>uv pip install fastapi-amis\n</code></pre> <p>\u5b89\u88c5\u5f00\u53d1\u4f9d\u8d56\uff1a</p> <pre><code>pip install fastapi-amis[dev]\n</code></pre>"},{"location":"#_4","title":"\u5feb\u901f\u793a\u4f8b","text":"<p>\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u7ba1\u7406\u540e\u53f0\u5e94\u7528\uff1a</p> <pre><code>from fastapi import FastAPI\nfrom fastapi_amis.core.router import AmisViewRouter\nfrom fastapi_amis.core.site import AmisSite\nfrom fastapi_amis.core.views import AmisView\nfrom fastapi_amis.amis.components import Page\n\n# \u521b\u5efa\u8def\u7531\u5668\nuser_router = AmisViewRouter(name=\"users\", type=\"page\")\n\n# \u6ce8\u518c\u89c6\u56fe\n@user_router.register\nclass UserListView(AmisView):\n    page_schema = \"\u7528\u6237\u5217\u8868\"\n    url = \"/users\"\n    page = Page(\n        title=\"\u7528\u6237\u5217\u8868\",\n        body={\"type\": \"crud\", \"api\": \"/api/users\"}\n    )\n\n# \u521b\u5efa\u5e94\u7528\napp = FastAPI()\nsite = AmisSite(title=\"\u7ba1\u7406\u540e\u53f0\")\nsite.add_router(user_router)\nsite.mount_to_app(app)\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre> <p>\u8bbf\u95ee http://localhost:8000 \u67e5\u770b\u6548\u679c\u3002</p>"},{"location":"#_5","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u5b89\u88c5\u6307\u5357 - \u8be6\u7ec6\u7684\u5b89\u88c5\u8bf4\u660e</li> <li>\u7b2c\u4e00\u4e2a\u5e94\u7528 - \u521b\u5efa\u4f60\u7684\u7b2c\u4e00\u4e2a\u5e94\u7528</li> <li>\u793a\u4f8b\u9879\u76ee - \u67e5\u770b\u66f4\u591a\u793a\u4f8b</li> <li>\u6838\u5fc3\u6982\u5ff5 - \u4e86\u89e3\u6846\u67b6\u7684\u6838\u5fc3\u6982\u5ff5</li> </ul>"},{"location":"#_6","title":"\u53c2\u8003\u548c\u611f\u8c22","text":"<p>\u672c\u9879\u76ee\u53d7\u5230\u4e86\u4ee5\u4e0b\u4f18\u79c0\u9879\u76ee\u7684\u542f\u53d1\u548c\u5f71\u54cd\uff1a</p> <ul> <li>FastAPI-Amis-Admin - \u611f\u8c22 amisadmin \u56e2\u961f\u63d0\u4f9b\u7684\u5b9d\u8d35\u7684\u67b6\u6784\u53c2\u8003\u548c\u8bbe\u8ba1\u601d\u8def</li> <li>Amis - \u611f\u8c22\u767e\u5ea6 Amis \u56e2\u961f\u63d0\u4f9b\u7684\u4f18\u79c0\u524d\u7aef\u7ec4\u4ef6\u5e93</li> </ul>"},{"location":"#_7","title":"\u8bb8\u53ef\u8bc1","text":"<p>\u672c\u9879\u76ee\u91c7\u7528 Apache 2.0 \u8bb8\u53ef\u8bc1\u3002</p>"},{"location":"changelog/","title":"\u66f4\u65b0\u65e5\u5fd7","text":"<p>\u672c\u6587\u6863\u8bb0\u5f55\u4e86 FastAPI Amis \u7684\u6240\u6709\u91cd\u8981\u66f4\u6539\u3002</p> <p>\u683c\u5f0f\u57fa\u4e8e Keep a Changelog\uff0c \u7248\u672c\u53f7\u9075\u5faa \u8bed\u4e49\u5316\u7248\u672c\u3002</p>"},{"location":"changelog/#_2","title":"\u672a\u53d1\u5e03","text":""},{"location":"changelog/#_3","title":"\u8ba1\u5212\u4e2d\u7684\u529f\u80fd","text":"<ul> <li> \u6dfb\u52a0\u66f4\u591a Amis \u7ec4\u4ef6\u5c01\u88c5</li> <li> \u652f\u6301\u4e3b\u9898\u81ea\u5b9a\u4e49</li> <li> \u6dfb\u52a0\u6743\u9650\u7ba1\u7406\u7cfb\u7edf</li> <li> \u63d0\u4f9b\u9879\u76ee\u811a\u624b\u67b6</li> <li> \u652f\u6301\u56fd\u9645\u5316\uff08i18n\uff09</li> </ul>"},{"location":"changelog/#001-2025-01-xx","title":"0.0.1 - 2025-01-XX","text":""},{"location":"changelog/#_4","title":"\u65b0\u589e","text":"<ul> <li>\ud83c\udf89 \u9996\u6b21\u53d1\u5e03</li> <li>\u2728 \u6838\u5fc3\u529f\u80fd\u6a21\u5757</li> <li><code>AmisView</code> - \u89c6\u56fe\u57fa\u7c7b</li> <li><code>AmisViewRouter</code> - \u8def\u7531\u7ba1\u7406</li> <li><code>AmisSite</code> - \u7ad9\u70b9\u7ba1\u7406</li> <li>\ud83c\udfa8 Amis \u7ec4\u4ef6\u5c01\u88c5</li> <li><code>Page</code> - \u9875\u9762\u7ec4\u4ef6</li> <li>\u57fa\u7840\u7ec4\u4ef6\u652f\u6301</li> <li>\u7c7b\u578b\u5b9a\u4e49</li> <li>\ud83d\udce6 \u6269\u5c55\u529f\u80fd</li> <li>\u5f02\u5e38\u5904\u7406</li> <li>\u65e5\u5fd7\u914d\u7f6e</li> <li>\ud83d\udcdd \u6587\u6863</li> <li>\u5b8c\u6574\u7684\u4f7f\u7528\u6587\u6863</li> <li>\u5feb\u901f\u5f00\u59cb\u6307\u5357</li> <li>API \u53c2\u8003</li> <li>\u793a\u4f8b\u9879\u76ee</li> <li>\ud83e\uddea \u6d4b\u8bd5</li> <li>\u6838\u5fc3\u529f\u80fd\u5355\u5143\u6d4b\u8bd5</li> <li>\u96c6\u6210\u6d4b\u8bd5\u6846\u67b6</li> <li>\ud83d\udd27 \u5de5\u5177\u94fe</li> <li>\u4f7f\u7528 uv \u8fdb\u884c\u5305\u7ba1\u7406</li> <li>GitHub Actions CI/CD</li> <li>PyPI \u81ea\u52a8\u53d1\u5e03</li> </ul>"},{"location":"changelog/#_5","title":"\u6280\u672f\u6808","text":"<ul> <li>Python &gt;= 3.10</li> <li>FastAPI</li> <li>Pydantic &gt;= 2.5.0</li> <li>Jinja2</li> <li>Amis \u524d\u7aef\u6846\u67b6</li> </ul>"},{"location":"changelog/#_6","title":"\u7248\u672c\u8bf4\u660e","text":""},{"location":"changelog/#_7","title":"\u7248\u672c\u683c\u5f0f","text":"<p>\u7248\u672c\u53f7\u683c\u5f0f\uff1a<code>MAJOR.MINOR.PATCH</code></p> <ul> <li>MAJOR: \u4e0d\u517c\u5bb9\u7684 API \u66f4\u6539</li> <li>MINOR: \u5411\u540e\u517c\u5bb9\u7684\u529f\u80fd\u65b0\u589e</li> <li>PATCH: \u5411\u540e\u517c\u5bb9\u7684\u95ee\u9898\u4fee\u6b63</li> </ul>"},{"location":"changelog/#_8","title":"\u53d8\u66f4\u7c7b\u578b","text":"<ul> <li>\u65b0\u589e (Added): \u65b0\u529f\u80fd</li> <li>\u53d8\u66f4 (Changed): \u73b0\u6709\u529f\u80fd\u7684\u53d8\u66f4</li> <li>\u5e9f\u5f03 (Deprecated): \u5373\u5c06\u79fb\u9664\u7684\u529f\u80fd</li> <li>\u79fb\u9664 (Removed): \u5df2\u79fb\u9664\u7684\u529f\u80fd</li> <li>\u4fee\u590d (Fixed): \u95ee\u9898\u4fee\u590d</li> <li>\u5b89\u5168 (Security): \u5b89\u5168\u6027\u6539\u8fdb</li> </ul>"},{"location":"changelog/#_9","title":"\u8d21\u732e","text":"<p>\u67e5\u770b\u5b8c\u6574\u7684\u63d0\u4ea4\u5386\u53f2\uff1aGitHub Commits</p> <p>\u611f\u8c22\u6240\u6709\u8d21\u732e\u8005\uff01\ud83c\udf89</p>"},{"location":"contributing/","title":"\u8d21\u732e\u6307\u5357","text":"<p>\u611f\u8c22\u4f60\u5bf9 FastAPI Amis \u9879\u76ee\u7684\u5173\u6ce8\uff01\u6211\u4eec\u6b22\u8fce\u4efb\u4f55\u5f62\u5f0f\u7684\u8d21\u732e\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ul> <li>\ud83d\udc1b \u62a5\u544a Bug</li> <li>\ud83d\udca1 \u63d0\u51fa\u65b0\u529f\u80fd</li> <li>\ud83d\udcdd \u6539\u8fdb\u6587\u6863</li> <li>\ud83d\udd27 \u63d0\u4ea4\u4ee3\u7801</li> <li>\u2705 \u7f16\u5199\u6d4b\u8bd5</li> </ul>"},{"location":"contributing/#_2","title":"\u884c\u4e3a\u51c6\u5219","text":"<p>\u53c2\u4e0e\u672c\u9879\u76ee\u5373\u8868\u793a\u4f60\u540c\u610f\u9075\u5b88\u6211\u4eec\u7684\u884c\u4e3a\u51c6\u5219\uff1a</p> <ul> <li>\u5c0a\u91cd\u6240\u6709\u8d21\u732e\u8005</li> <li>\u63a5\u53d7\u5efa\u8bbe\u6027\u7684\u6279\u8bc4</li> <li>\u5173\u6ce8\u5bf9\u793e\u533a\u6700\u6709\u5229\u7684\u4e8b\u60c5</li> <li>\u5bf9\u4ed6\u4eba\u4fdd\u6301\u540c\u7406\u5fc3</li> </ul>"},{"location":"contributing/#_3","title":"\u5982\u4f55\u8d21\u732e","text":""},{"location":"contributing/#bug","title":"\u62a5\u544a Bug","text":"<p>\u5982\u679c\u4f60\u53d1\u73b0\u4e86 Bug\uff0c\u8bf7\u5728 GitHub Issues \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 issue\uff0c\u5e76\u5305\u542b\uff1a</p> <ul> <li>\ud83d\udccb Bug \u7684\u8be6\u7ec6\u63cf\u8ff0</li> <li>\ud83d\udd04 \u91cd\u73b0\u6b65\u9aa4</li> <li>\ud83d\udcbb \u4f60\u7684\u73af\u5883\u4fe1\u606f\uff08Python \u7248\u672c\u3001\u64cd\u4f5c\u7cfb\u7edf\u7b49\uff09</li> <li>\ud83d\udcf8 \u5982\u679c\u53ef\u80fd\uff0c\u63d0\u4f9b\u622a\u56fe\u6216\u9519\u8bef\u65e5\u5fd7</li> </ul> <p>Bug \u62a5\u544a\u6a21\u677f\uff1a</p> <pre><code>## Bug \u63cf\u8ff0\n\u7b80\u8981\u63cf\u8ff0\u9047\u5230\u7684\u95ee\u9898\n\n## \u91cd\u73b0\u6b65\u9aa4\n1. ...\n2. ...\n3. ...\n\n## \u671f\u671b\u884c\u4e3a\n\u63cf\u8ff0\u4f60\u671f\u671b\u53d1\u751f\u4ec0\u4e48\n\n## \u5b9e\u9645\u884c\u4e3a\n\u63cf\u8ff0\u5b9e\u9645\u53d1\u751f\u4e86\u4ec0\u4e48\n\n## \u73af\u5883\u4fe1\u606f\n- OS: [e.g., macOS 14.0]\n- Python: [e.g., 3.10.5]\n- FastAPI Amis: [e.g., 0.0.1]\n</code></pre>"},{"location":"contributing/#_4","title":"\u63d0\u51fa\u65b0\u529f\u80fd","text":"<p>\u5982\u679c\u4f60\u6709\u65b0\u529f\u80fd\u7684\u60f3\u6cd5\uff1a</p> <ol> <li>\u9996\u5148\u5728 GitHub Issues \u521b\u5efa\u4e00\u4e2a Feature Request</li> <li>\u63cf\u8ff0\u8fd9\u4e2a\u529f\u80fd\u7684\u7528\u9014\u548c\u4ef7\u503c</li> <li>\u5982\u679c\u53ef\u80fd\uff0c\u63d0\u4f9b\u4f7f\u7528\u793a\u4f8b\u6216 API \u8bbe\u8ba1</li> </ol> <p>\u529f\u80fd\u8bf7\u6c42\u6a21\u677f\uff1a</p> <pre><code>## \u529f\u80fd\u63cf\u8ff0\n\u7b80\u8981\u63cf\u8ff0\u63d0\u8bae\u7684\u529f\u80fd\n\n## \u4f7f\u7528\u573a\u666f\n\u63cf\u8ff0\u8fd9\u4e2a\u529f\u80fd\u7684\u4f7f\u7528\u573a\u666f\n\n## \u671f\u671b\u7684 API\n\\`\\`\\`python\n# \u793a\u4f8b\u4ee3\u7801\n\\`\\`\\`\n\n## \u66ff\u4ee3\u65b9\u6848\n\u662f\u5426\u8003\u8651\u8fc7\u5176\u4ed6\u5b9e\u73b0\u65b9\u5f0f\uff1f\n</code></pre>"},{"location":"contributing/#_5","title":"\u6539\u8fdb\u6587\u6863","text":"<p>\u6587\u6863\u540c\u6837\u91cd\u8981\uff01\u4f60\u53ef\u4ee5\uff1a</p> <ul> <li>\u4fee\u6b63\u62fc\u5199\u6216\u8bed\u6cd5\u9519\u8bef</li> <li>\u6dfb\u52a0\u66f4\u591a\u793a\u4f8b</li> <li>\u6539\u8fdb\u73b0\u6709\u8bf4\u660e</li> <li>\u7ffb\u8bd1\u6587\u6863</li> </ul> <p>\u6587\u6863\u4f4d\u4e8e <code>docs/</code> \u76ee\u5f55\uff0c\u4f7f\u7528 MkDocs \u6784\u5efa\u3002</p>"},{"location":"contributing/#_6","title":"\u63d0\u4ea4\u4ee3\u7801","text":""},{"location":"contributing/#1-fork","title":"1. Fork \u4ed3\u5e93","text":"<p>\u70b9\u51fb\u4ed3\u5e93\u9875\u9762\u53f3\u4e0a\u89d2\u7684 \"Fork\" \u6309\u94ae\u3002</p>"},{"location":"contributing/#2-fork","title":"2. \u514b\u9686\u4f60\u7684 Fork","text":"<pre><code>git clone https://github.com/your-username/fastapi-amis.git\ncd fastapi-amis\n</code></pre>"},{"location":"contributing/#3","title":"3. \u521b\u5efa\u5206\u652f","text":"<pre><code>git checkout -b feature/your-feature-name\n# \u6216\ngit checkout -b fix/your-bug-fix\n</code></pre> <p>\u5206\u652f\u547d\u540d\u89c4\u8303\uff1a</p> <ul> <li><code>feature/xxx</code> - \u65b0\u529f\u80fd</li> <li><code>fix/xxx</code> - Bug \u4fee\u590d</li> <li><code>docs/xxx</code> - \u6587\u6863\u6539\u8fdb</li> <li><code>refactor/xxx</code> - \u4ee3\u7801\u91cd\u6784</li> <li><code>test/xxx</code> - \u6d4b\u8bd5\u76f8\u5173</li> </ul>"},{"location":"contributing/#4","title":"4. \u8bbe\u7f6e\u5f00\u53d1\u73af\u5883","text":"<pre><code># \u5b89\u88c5 uv\uff08\u5982\u679c\u5c1a\u672a\u5b89\u88c5\uff09\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# \u540c\u6b65\u4f9d\u8d56\nuv sync\n\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nsource .venv/bin/activate  # Linux/macOS\n# \u6216\n.venv\\Scripts\\activate  # Windows\n</code></pre>"},{"location":"contributing/#5","title":"5. \u8fdb\u884c\u4fee\u6539","text":"<p>\u9075\u5faa\u9879\u76ee\u7684\u4ee3\u7801\u89c4\u8303\uff1a</p> <ul> <li>\u4f7f\u7528 Python 3.10+ \u7279\u6027</li> <li>\u9075\u5faa PEP 8 \u4ee3\u7801\u98ce\u683c</li> <li>\u6dfb\u52a0\u7c7b\u578b\u6ce8\u89e3</li> <li>\u7f16\u5199\u6e05\u6670\u7684\u6ce8\u91ca\u548c\u6587\u6863\u5b57\u7b26\u4e32</li> <li>\u4fdd\u6301\u4ee3\u7801\u7b80\u6d01\u53ef\u8bfb</li> </ul>"},{"location":"contributing/#6","title":"6. \u8fd0\u884c\u6d4b\u8bd5","text":"<pre><code># \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\npytest\n\n# \u8fd0\u884c\u7279\u5b9a\u6d4b\u8bd5\npytest tests/test_core.py\n\n# \u67e5\u770b\u6d4b\u8bd5\u8986\u76d6\u7387\npytest --cov=fastapi_amis\n</code></pre>"},{"location":"contributing/#7","title":"7. \u63d0\u4ea4\u66f4\u6539","text":"<pre><code>git add .\ngit commit -m \"feat: add new feature\"\n</code></pre> <p>\u63d0\u4ea4\u4fe1\u606f\u89c4\u8303\uff08\u9075\u5faa Conventional Commits\uff09\uff1a</p> <ul> <li><code>feat:</code> - \u65b0\u529f\u80fd</li> <li><code>fix:</code> - Bug \u4fee\u590d</li> <li><code>docs:</code> - \u6587\u6863\u66f4\u65b0</li> <li><code>style:</code> - \u4ee3\u7801\u683c\u5f0f\u8c03\u6574</li> <li><code>refactor:</code> - \u4ee3\u7801\u91cd\u6784</li> <li><code>test:</code> - \u6d4b\u8bd5\u76f8\u5173</li> <li><code>chore:</code> - \u6784\u5efa/\u5de5\u5177\u76f8\u5173</li> </ul>"},{"location":"contributing/#8-github","title":"8. \u63a8\u9001\u5230 GitHub","text":"<pre><code>git push origin feature/your-feature-name\n</code></pre>"},{"location":"contributing/#9-pull-request","title":"9. \u521b\u5efa Pull Request","text":"<ol> <li>\u8bbf\u95ee\u4f60\u7684 Fork \u9875\u9762</li> <li>\u70b9\u51fb \"Pull Request\" \u6309\u94ae</li> <li>\u586b\u5199 PR \u63cf\u8ff0\uff0c\u8bf4\u660e\u4f60\u7684\u66f4\u6539</li> <li>\u7b49\u5f85\u7ef4\u62a4\u8005\u5ba1\u6838</li> </ol> <p>Pull Request \u6a21\u677f\uff1a</p> <pre><code>## \u53d8\u66f4\u7c7b\u578b\n- [ ] Bug \u4fee\u590d\n- [ ] \u65b0\u529f\u80fd\n- [ ] \u6587\u6863\u66f4\u65b0\n- [ ] \u4ee3\u7801\u91cd\u6784\n\n## \u63cf\u8ff0\n\u7b80\u8981\u63cf\u8ff0\u8fd9\u4e2a PR \u7684\u5185\u5bb9\n\n## \u76f8\u5173 Issue\nCloses #issue_number\n\n## \u6d4b\u8bd5\n- [ ] \u6dfb\u52a0\u4e86\u65b0\u7684\u6d4b\u8bd5\n- [ ] \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7\n- [ ] \u624b\u52a8\u6d4b\u8bd5\u901a\u8fc7\n\n## \u68c0\u67e5\u6e05\u5355\n- [ ] \u4ee3\u7801\u9075\u5faa\u9879\u76ee\u89c4\u8303\n- [ ] \u6dfb\u52a0\u4e86\u5fc5\u8981\u7684\u6587\u6863\n- [ ] \u66f4\u65b0\u4e86 CHANGELOG\n</code></pre>"},{"location":"contributing/#_7","title":"\u5f00\u53d1\u89c4\u8303","text":""},{"location":"contributing/#_8","title":"\u4ee3\u7801\u98ce\u683c","text":"<p>\u6211\u4eec\u4f7f\u7528\u4ee5\u4e0b\u5de5\u5177\u786e\u4fdd\u4ee3\u7801\u8d28\u91cf\uff1a</p> <ul> <li>Ruff - \u4ee3\u7801\u68c0\u67e5\u548c\u683c\u5f0f\u5316</li> <li>mypy - \u7c7b\u578b\u68c0\u67e5</li> <li>pytest - \u6d4b\u8bd5\u6846\u67b6</li> </ul> <p>\u8fd0\u884c\u4ee3\u7801\u68c0\u67e5\uff1a</p> <pre><code># \u4f7f\u7528 ruff \u683c\u5f0f\u5316\u4ee3\u7801\nruff format .\n\n# \u68c0\u67e5\u4ee3\u7801\u98ce\u683c\nruff check .\n\n# \u7c7b\u578b\u68c0\u67e5\nmypy fastapi_amis\n</code></pre>"},{"location":"contributing/#_9","title":"\u7c7b\u578b\u6ce8\u89e3","text":"<p>\u6240\u6709\u51fd\u6570\u90fd\u5e94\u8be5\u6709\u7c7b\u578b\u6ce8\u89e3\uff1a</p> <pre><code>from typing import Optional, List\n\ndef get_users(\n    page: int = 1,\n    limit: int = 10,\n    query: Optional[str] = None\n) -&gt; List[User]:\n    ...\n</code></pre>"},{"location":"contributing/#_10","title":"\u6587\u6863\u5b57\u7b26\u4e32","text":"<p>\u4f7f\u7528 Google \u98ce\u683c\u7684\u6587\u6863\u5b57\u7b26\u4e32\uff1a</p> <pre><code>def create_page(title: str, body: dict) -&gt; Page:\n    \"\"\"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u9875\u9762\u3002\n\n    Args:\n        title: \u9875\u9762\u6807\u9898\n        body: \u9875\u9762\u5185\u5bb9\u914d\u7f6e\n\n    Returns:\n        \u521b\u5efa\u7684 Page \u5bf9\u8c61\n\n    Raises:\n        ValueError: \u5982\u679c\u53c2\u6570\u65e0\u6548\n    \"\"\"\n    ...\n</code></pre>"},{"location":"contributing/#_11","title":"\u6d4b\u8bd5","text":"<ul> <li>\u4e3a\u65b0\u529f\u80fd\u7f16\u5199\u6d4b\u8bd5</li> <li>\u786e\u4fdd\u6d4b\u8bd5\u8986\u76d6\u7387\u4e0d\u964d\u4f4e</li> <li>\u6d4b\u8bd5\u5e94\u8be5\u72ec\u7acb\u4e14\u53ef\u91cd\u590d</li> </ul> <pre><code>def test_create_page():\n    \"\"\"\u6d4b\u8bd5\u9875\u9762\u521b\u5efa\u529f\u80fd\"\"\"\n    page = Page(title=\"Test\", body={})\n    assert page.title == \"Test\"\n</code></pre>"},{"location":"contributing/#_12","title":"\u53d1\u5e03\u6d41\u7a0b","text":"<p>\u9879\u76ee\u7ef4\u62a4\u8005\u8d1f\u8d23\u53d1\u5e03\u65b0\u7248\u672c\uff1a</p> <ol> <li>\u66f4\u65b0\u7248\u672c\u53f7\uff08<code>pyproject.toml</code> \u548c <code>__init__.py</code>\uff09</li> <li>\u66f4\u65b0 CHANGELOG.md</li> <li>\u521b\u5efa Git tag</li> <li>\u63a8\u9001\u5230 GitHub</li> <li>GitHub Actions \u81ea\u52a8\u53d1\u5e03\u5230 PyPI</li> </ol>"},{"location":"contributing/#_13","title":"\u793e\u533a","text":"<ul> <li>GitHub Issues - \u62a5\u544a\u95ee\u9898\u548c\u529f\u80fd\u8bf7\u6c42</li> <li>GitHub Discussions - \u4e00\u822c\u8ba8\u8bba\u548c\u95ee\u7b54</li> <li>Email - 260987762@qq.com</li> </ul>"},{"location":"contributing/#_14","title":"\u8bb8\u53ef\u8bc1","text":"<p>\u8d21\u732e\u7684\u4ee3\u7801\u5c06\u91c7\u7528\u4e0e\u9879\u76ee\u76f8\u540c\u7684 Apache 2.0 \u8bb8\u53ef\u8bc1\u3002</p>"},{"location":"contributing/#_15","title":"\u81f4\u8c22","text":"<p>\u611f\u8c22\u6240\u6709\u4e3a\u9879\u76ee\u505a\u51fa\u8d21\u732e\u7684\u4eba\uff01</p> <p>\u4f60\u7684\u540d\u5b57\u5c06\u4f1a\u51fa\u73b0\u5728\u6211\u4eec\u7684\u8d21\u732e\u8005\u5217\u8868\u4e2d\u3002</p>"},{"location":"api/components/","title":"Amis \u7ec4\u4ef6 API","text":"<p>FastAPI Amis \u5c01\u88c5\u7684 Amis \u7ec4\u4ef6 API \u53c2\u8003\u3002</p>"},{"location":"api/components/#page","title":"Page","text":"<p>\u9875\u9762\u7ec4\u4ef6\uff0c\u662f\u6700\u9876\u5c42\u7684\u5bb9\u5668\u3002</p>"},{"location":"api/components/#_1","title":"\u7c7b\u5b9a\u4e49","text":"<pre><code>class Page(BaseComponent):\n    type: str = \"page\"\n    title: Optional[str] = None\n    subTitle: Optional[str] = None\n    body: Union[Dict, List, str, BaseComponent] = []\n    toolbar: Optional[List] = None\n    aside: Optional[Dict] = None\n</code></pre>"},{"location":"api/components/#_2","title":"\u53c2\u6570","text":"<ul> <li><code>type</code> (str): \u7ec4\u4ef6\u7c7b\u578b\uff0c\u56fa\u5b9a\u4e3a \"page\"</li> <li><code>title</code> (Optional[str]): \u9875\u9762\u6807\u9898</li> <li><code>subTitle</code> (Optional[str]): \u9875\u9762\u526f\u6807\u9898</li> <li><code>body</code> (Union[Dict, List, str, BaseComponent]): \u9875\u9762\u5185\u5bb9</li> <li><code>toolbar</code> (Optional[List]): \u5de5\u5177\u680f\u914d\u7f6e</li> <li><code>aside</code> (Optional[Dict]): \u4fa7\u8fb9\u680f\u914d\u7f6e</li> </ul>"},{"location":"api/components/#_3","title":"\u793a\u4f8b","text":"<pre><code>from fastapi_amis.amis.components import Page\n\npage = Page(\n    title=\"\u7528\u6237\u7ba1\u7406\",\n    subTitle=\"\u7ba1\u7406\u7cfb\u7edf\u7528\u6237\",\n    body=[\n        {\n            \"type\": \"crud\",\n            \"api\": \"/api/users\",\n            \"columns\": [...]\n        }\n    ]\n)\n</code></pre>"},{"location":"api/components/#basecomponent","title":"BaseComponent","text":"<p>\u6240\u6709\u7ec4\u4ef6\u7684\u57fa\u7c7b\u3002</p>"},{"location":"api/components/#_4","title":"\u7c7b\u5b9a\u4e49","text":"<pre><code>class BaseComponent(BaseModel):\n    type: str\n    className: Optional[str] = None\n    visible: Optional[bool] = None\n    hidden: Optional[bool] = None\n\n    class Config:\n        extra = \"allow\"\n</code></pre>"},{"location":"api/components/#_5","title":"\u53c2\u6570","text":"<ul> <li><code>type</code> (str): \u7ec4\u4ef6\u7c7b\u578b</li> <li><code>className</code> (Optional[str]): CSS \u7c7b\u540d</li> <li><code>visible</code> (Optional[bool]): \u662f\u5426\u53ef\u89c1</li> <li><code>hidden</code> (Optional[bool]): \u662f\u5426\u9690\u85cf</li> </ul>"},{"location":"api/components/#_6","title":"\u8868\u5355\u7ec4\u4ef6","text":""},{"location":"api/components/#form","title":"Form","text":"<p>\u8868\u5355\u5bb9\u5668\u7ec4\u4ef6\u3002</p> <pre><code>form = {\n    \"type\": \"form\",\n    \"title\": \"\u8868\u5355\u6807\u9898\",\n    \"api\": \"post:/api/endpoint\",\n    \"body\": [\n        # \u8868\u5355\u5b57\u6bb5\n    ],\n    \"actions\": [\n        {\n            \"type\": \"submit\",\n            \"label\": \"\u63d0\u4ea4\"\n        },\n        {\n            \"type\": \"reset\",\n            \"label\": \"\u91cd\u7f6e\"\n        }\n    ]\n}\n</code></pre>"},{"location":"api/components/#inputtext","title":"InputText","text":"<p>\u6587\u672c\u8f93\u5165\u5b57\u6bb5\u3002</p> <pre><code>input_text = {\n    \"type\": \"input-text\",\n    \"name\": \"username\",\n    \"label\": \"\u7528\u6237\u540d\",\n    \"required\": True,\n    \"minLength\": 3,\n    \"maxLength\": 20,\n    \"placeholder\": \"\u8bf7\u8f93\u5165\u7528\u6237\u540d\",\n    \"validations\": {\n        \"isAlphanumeric\": True\n    },\n    \"validationErrors\": {\n        \"isAlphanumeric\": \"\u53ea\u80fd\u5305\u542b\u5b57\u6bcd\u548c\u6570\u5b57\"\n    }\n}\n</code></pre>"},{"location":"api/components/#select","title":"Select","text":"<p>\u9009\u62e9\u5668\u5b57\u6bb5\u3002</p> <pre><code>select = {\n    \"type\": \"select\",\n    \"name\": \"role\",\n    \"label\": \"\u89d2\u8272\",\n    \"options\": [\n        {\"label\": \"\u7ba1\u7406\u5458\", \"value\": \"admin\"},\n        {\"label\": \"\u666e\u901a\u7528\u6237\", \"value\": \"user\"}\n    ],\n    \"clearable\": True,\n    \"searchable\": True\n}\n</code></pre>"},{"location":"api/components/#_7","title":"\u5c55\u793a\u7ec4\u4ef6","text":""},{"location":"api/components/#crud","title":"CRUD","text":"<p>\u589e\u5220\u6539\u67e5\u8868\u683c\u7ec4\u4ef6\u3002</p> <pre><code>crud = {\n    \"type\": \"crud\",\n    \"api\": \"/api/users\",\n    \"syncLocation\": False,\n    \"columns\": [\n        {\n            \"name\": \"id\",\n            \"label\": \"ID\",\n            \"type\": \"text\",\n            \"sortable\": True\n        },\n        {\n            \"name\": \"name\",\n            \"label\": \"\u59d3\u540d\",\n            \"type\": \"text\",\n            \"searchable\": True\n        }\n    ],\n    \"headerToolbar\": [\n        \"bulkActions\",\n        {\n            \"type\": \"button\",\n            \"label\": \"\u65b0\u589e\",\n            \"actionType\": \"dialog\",\n            \"level\": \"primary\",\n            \"dialog\": {\n                \"title\": \"\u6dfb\u52a0\u7528\u6237\",\n                \"body\": {\n                    \"type\": \"form\",\n                    \"api\": \"post:/api/users\",\n                    \"body\": [...]\n                }\n            }\n        }\n    ],\n    \"footerToolbar\": [\"statistics\", \"pagination\"],\n    \"bulkActions\": [\n        {\n            \"label\": \"\u6279\u91cf\u5220\u9664\",\n            \"actionType\": \"ajax\",\n            \"api\": \"delete:/api/users\",\n            \"confirmText\": \"\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684\u7528\u6237\u5417\uff1f\"\n        }\n    ]\n}\n</code></pre>"},{"location":"api/components/#table","title":"Table","text":"<p>\u7b80\u5355\u8868\u683c\u7ec4\u4ef6\u3002</p> <pre><code>table = {\n    \"type\": \"table\",\n    \"data\": {\n        \"items\": [\n            {\"id\": 1, \"name\": \"\u5f20\u4e09\", \"age\": 25},\n            {\"id\": 2, \"name\": \"\u674e\u56db\", \"age\": 30}\n        ]\n    },\n    \"columns\": [\n        {\"name\": \"id\", \"label\": \"ID\"},\n        {\"name\": \"name\", \"label\": \"\u59d3\u540d\"},\n        {\"name\": \"age\", \"label\": \"\u5e74\u9f84\"}\n    ]\n}\n</code></pre>"},{"location":"api/components/#cards","title":"Cards","text":"<p>\u5361\u7247\u5217\u8868\u7ec4\u4ef6\u3002</p> <pre><code>cards = {\n    \"type\": \"cards\",\n    \"source\": \"/api/products\",\n    \"placeholder\": \"\u6682\u65e0\u6570\u636e\",\n    \"card\": {\n        \"header\": {\n            \"title\": \"${name}\",\n            \"subTitle\": \"${category}\",\n            \"avatar\": \"${image}\"\n        },\n        \"body\": [\n            {\n                \"type\": \"tpl\",\n                \"tpl\": '\u4ef7\u683c\uff1a\u00a5${price}'\n            }\n        ],\n        \"actions\": [\n            {\n                \"type\": \"button\",\n                \"label\": \"\u67e5\u770b\u8be6\u60c5\",\n                \"actionType\": \"link\",\n                \"link\": \"/products/${id}\"\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"api/components/#_8","title":"\u5e03\u5c40\u7ec4\u4ef6","text":""},{"location":"api/components/#grid","title":"Grid","text":"<p>\u7f51\u683c\u5e03\u5c40\u7ec4\u4ef6\u3002</p> <pre><code>grid = {\n    \"type\": \"grid\",\n    \"columns\": [\n        {\n            \"md\": 6,  # \u5360\u7528 6 \u5217\uff08\u5171 12 \u5217\uff09\n            \"body\": [...]\n        },\n        {\n            \"md\": 6,\n            \"body\": [...]\n        }\n    ]\n}\n</code></pre>"},{"location":"api/components/#panel","title":"Panel","text":"<p>\u9762\u677f\u7ec4\u4ef6\u3002</p> <pre><code>panel = {\n    \"type\": \"panel\",\n    \"title\": \"\u9762\u677f\u6807\u9898\",\n    \"body\": \"\u9762\u677f\u5185\u5bb9\",\n    \"className\": \"panel-info\",\n    \"actions\": [\n        {\n            \"type\": \"button\",\n            \"label\": \"\u64cd\u4f5c\"\n        }\n    ]\n}\n</code></pre>"},{"location":"api/components/#tabs","title":"Tabs","text":"<p>\u6807\u7b7e\u9875\u7ec4\u4ef6\u3002</p> <pre><code>tabs = {\n    \"type\": \"tabs\",\n    \"tabs\": [\n        {\n            \"title\": \"\u57fa\u672c\u4fe1\u606f\",\n            \"body\": [...]\n        },\n        {\n            \"title\": \"\u8be6\u7ec6\u4fe1\u606f\",\n            \"body\": [...]\n        }\n    ]\n}\n</code></pre>"},{"location":"api/components/#_9","title":"\u4ea4\u4e92\u7ec4\u4ef6","text":""},{"location":"api/components/#button","title":"Button","text":"<p>\u6309\u94ae\u7ec4\u4ef6\u3002</p> <pre><code>button = {\n    \"type\": \"button\",\n    \"label\": \"\u6309\u94ae\",\n    \"level\": \"primary\",  # primary, secondary, success, danger, warning, info\n    \"size\": \"md\",  # xs, sm, md, lg\n    \"actionType\": \"ajax\",  # ajax, link, dialog, drawer, confirm\n    \"api\": \"post:/api/action\",\n    \"confirmText\": \"\u786e\u5b9a\u6267\u884c\u6b64\u64cd\u4f5c\u5417\uff1f\"\n}\n</code></pre>"},{"location":"api/components/#dialog","title":"Dialog","text":"<p>\u5bf9\u8bdd\u6846\u7ec4\u4ef6\u3002</p> <pre><code>dialog_button = {\n    \"type\": \"button\",\n    \"label\": \"\u6253\u5f00\u5bf9\u8bdd\u6846\",\n    \"actionType\": \"dialog\",\n    \"dialog\": {\n        \"title\": \"\u5bf9\u8bdd\u6846\u6807\u9898\",\n        \"size\": \"lg\",  # xs, sm, md, lg, xl, full\n        \"body\": {\n            \"type\": \"form\",\n            \"api\": \"post:/api/submit\",\n            \"body\": [...]\n        },\n        \"actions\": [\n            {\n                \"type\": \"button\",\n                \"label\": \"\u53d6\u6d88\",\n                \"actionType\": \"cancel\"\n            },\n            {\n                \"type\": \"submit\",\n                \"label\": \"\u786e\u5b9a\",\n                \"level\": \"primary\"\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"api/components/#drawer","title":"Drawer","text":"<p>\u62bd\u5c49\u7ec4\u4ef6\u3002</p> <pre><code>drawer_button = {\n    \"type\": \"button\",\n    \"label\": \"\u6253\u5f00\u62bd\u5c49\",\n    \"actionType\": \"drawer\",\n    \"drawer\": {\n        \"title\": \"\u62bd\u5c49\u6807\u9898\",\n        \"position\": \"right\",  # left, right, top, bottom\n        \"size\": \"md\",\n        \"body\": \"\u62bd\u5c49\u5185\u5bb9\"\n    }\n}\n</code></pre>"},{"location":"api/components/#_10","title":"\u6570\u636e\u7ec4\u4ef6","text":""},{"location":"api/components/#service","title":"Service","text":"<p>\u6570\u636e\u670d\u52a1\u7ec4\u4ef6\uff0c\u7528\u4e8e\u83b7\u53d6\u6570\u636e\u3002</p> <pre><code>service = {\n    \"type\": \"service\",\n    \"api\": \"/api/data\",\n    \"body\": [\n        {\n            \"type\": \"panel\",\n            \"title\": \"\u6570\u636e\u5c55\u793a\",\n            \"body\": \"${data}\"\n        }\n    ]\n}\n</code></pre>"},{"location":"api/components/#chart","title":"Chart","text":"<p>\u56fe\u8868\u7ec4\u4ef6\uff08\u57fa\u4e8e ECharts\uff09\u3002</p> <pre><code>chart = {\n    \"type\": \"chart\",\n    \"api\": \"/api/chart-data\",\n    \"config\": {\n        \"title\": {\n            \"text\": \"\u9500\u552e\u7edf\u8ba1\"\n        },\n        \"tooltip\": {},\n        \"legend\": {\n            \"data\": [\"\u9500\u552e\u989d\"]\n        },\n        \"xAxis\": {\n            \"data\": [\"\u4e00\u6708\", \"\u4e8c\u6708\", \"\u4e09\u6708\", \"\u56db\u6708\", \"\u4e94\u6708\", \"\u516d\u6708\"]\n        },\n        \"yAxis\": {},\n        \"series\": [\n            {\n                \"name\": \"\u9500\u552e\u989d\",\n                \"type\": \"bar\",\n                \"data\": [5, 20, 36, 10, 10, 20]\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"api/components/#_11","title":"\u5de5\u5177\u65b9\u6cd5","text":""},{"location":"api/components/#dict","title":"dict()","text":"<p>\u5c06\u7ec4\u4ef6\u8f6c\u6362\u4e3a\u5b57\u5178\u3002</p> <pre><code>page = Page(title=\"\u6d4b\u8bd5\")\npage_dict = page.dict(exclude_none=True)\n</code></pre>"},{"location":"api/components/#json","title":"json()","text":"<p>\u5c06\u7ec4\u4ef6\u8f6c\u6362\u4e3a JSON \u5b57\u7b26\u4e32\u3002</p> <pre><code>page = Page(title=\"\u6d4b\u8bd5\")\npage_json = page.json(exclude_none=True)\n</code></pre>"},{"location":"api/components/#_12","title":"\u7c7b\u578b\u522b\u540d","text":"<pre><code>from typing import Union, Dict, List\n\n# \u7ec4\u4ef6\u7c7b\u578b\nComponentType = Union[Dict, BaseComponent, str]\n\n# \u7ec4\u4ef6\u5217\u8868\u7c7b\u578b\nComponentList = List[ComponentType]\n\n# \u9875\u9762\u5185\u5bb9\u7c7b\u578b\nBodyType = Union[ComponentType, ComponentList]\n</code></pre>"},{"location":"api/components/#_13","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u6269\u5c55\u529f\u80fd API - \u6269\u5c55\u6a21\u5757 API</li> <li>\u6838\u5fc3\u6a21\u5757 API - \u6838\u5fc3\u6a21\u5757 API</li> <li>Amis \u5b98\u65b9\u6587\u6863 - \u5b8c\u6574\u7684\u7ec4\u4ef6\u6587\u6863</li> </ul>"},{"location":"api/core/","title":"\u6838\u5fc3\u6a21\u5757 API","text":"<p>FastAPI Amis \u6838\u5fc3\u6a21\u5757\u7684 API \u53c2\u8003\u6587\u6863\u3002</p>"},{"location":"api/core/#amissite","title":"AmisSite","text":"<p>\u7ad9\u70b9\u7ba1\u7406\u7c7b\uff0c\u7528\u4e8e\u521b\u5efa\u548c\u7ba1\u7406\u6574\u4e2a\u7ba1\u7406\u540e\u53f0\u5e94\u7528\u3002</p>"},{"location":"api/core/#_1","title":"\u7c7b\u5b9a\u4e49","text":"<pre><code>class AmisSite:\n    def __init__(\n        self,\n        title: str = \"Admin\",\n        logo: Optional[str] = None,\n        favicon: Optional[str] = None,\n        description: Optional[str] = None,\n        theme: str = \"cxd\",\n        layout: str = \"aside\",\n        **kwargs\n    )\n</code></pre>"},{"location":"api/core/#_2","title":"\u53c2\u6570","text":"<ul> <li><code>title</code> (str): \u7ad9\u70b9\u6807\u9898\uff0c\u9ed8\u8ba4 \"Admin\"</li> <li><code>logo</code> (Optional[str]): Logo URL</li> <li><code>favicon</code> (Optional[str]): \u7f51\u7ad9\u56fe\u6807 URL</li> <li><code>description</code> (Optional[str]): \u7ad9\u70b9\u63cf\u8ff0</li> <li><code>theme</code> (str): \u4e3b\u9898\u540d\u79f0\uff0c\u9ed8\u8ba4 \"cxd\"</li> <li><code>layout</code> (str): \u5e03\u5c40\u6a21\u5f0f\uff0c\u9ed8\u8ba4 \"aside\"</li> </ul>"},{"location":"api/core/#_3","title":"\u65b9\u6cd5","text":""},{"location":"api/core/#add_router","title":"add_router","text":"<p>\u6dfb\u52a0\u8def\u7531\u5668\u5230\u7ad9\u70b9\u3002</p> <pre><code>def add_router(\n    self,\n    router: AmisViewRouter,\n    *, \n    visible: bool = True\n) -&gt; None\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li><code>router</code> (AmisViewRouter): \u8981\u6dfb\u52a0\u7684\u8def\u7531\u5668</li> <li><code>visible</code> (bool): \u662f\u5426\u5728\u5bfc\u822a\u4e2d\u663e\u793a\uff0c\u9ed8\u8ba4 True</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>site = AmisSite(title=\"\u7ba1\u7406\u540e\u53f0\")\nuser_router = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\")\nsite.add_router(user_router)\n</code></pre>"},{"location":"api/core/#mount_to_app","title":"mount_to_app","text":"<p>\u5c06\u7ad9\u70b9\u6302\u8f7d\u5230 FastAPI \u5e94\u7528\u3002</p> <pre><code>def mount_to_app(\n    self,\n    app: FastAPI,\n    *,\n    prefix: str = \"\",\n    tags: Optional[List[str]] = None\n) -&gt; None\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li><code>app</code> (FastAPI): FastAPI \u5e94\u7528\u5b9e\u4f8b</li> <li><code>prefix</code> (str): URL \u524d\u7f00\uff0c\u9ed8\u8ba4 \"\"</li> <li><code>tags</code> (Optional[List[str]]): OpenAPI \u6807\u7b7e</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>app = FastAPI()\nsite.mount_to_app(app, prefix=\"/admin\")\n</code></pre>"},{"location":"api/core/#amisviewrouter","title":"AmisViewRouter","text":"<p>\u8def\u7531\u5668\u7c7b\uff0c\u7528\u4e8e\u7ec4\u7ec7\u76f8\u5173\u7684\u89c6\u56fe\u3002</p>"},{"location":"api/core/#_4","title":"\u7c7b\u5b9a\u4e49","text":"<pre><code>class AmisViewRouter:\n    def __init__(\n        self,\n        name: str,\n        type: str = \"page\",\n        icon: Optional[str] = None,\n        visible: bool = True,\n        **kwargs\n    )\n</code></pre>"},{"location":"api/core/#_5","title":"\u53c2\u6570","text":"<ul> <li><code>name</code> (str): \u8def\u7531\u5668\u540d\u79f0\uff0c\u663e\u793a\u5728\u5bfc\u822a\u4e2d</li> <li><code>type</code> (str): \u8def\u7531\u7c7b\u578b\uff0c\u9ed8\u8ba4 \"page\"</li> <li><code>icon</code> (Optional[str]): \u56fe\u6807\u7c7b\u540d</li> <li><code>visible</code> (bool): \u662f\u5426\u5728\u5bfc\u822a\u4e2d\u663e\u793a\uff0c\u9ed8\u8ba4 True</li> </ul>"},{"location":"api/core/#_6","title":"\u65b9\u6cd5","text":""},{"location":"api/core/#register","title":"register","text":"<p>\u88c5\u9970\u5668\u65b9\u6cd5\uff0c\u7528\u4e8e\u6ce8\u518c\u89c6\u56fe\u5230\u8def\u7531\u5668\u3002</p> <pre><code>def register(\n    self,\n    view_class: Type[AmisView]\n) -&gt; Type[AmisView]\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li><code>view_class</code> (Type[AmisView]): \u89c6\u56fe\u7c7b</li> </ul> <p>\u8fd4\u56de\uff1a</p> <ul> <li>Type[AmisView]: \u6ce8\u518c\u540e\u7684\u89c6\u56fe\u7c7b</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>router = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\")\n\n@router.register\nclass UserListView(AmisView):\n    page_schema = \"\u7528\u6237\u5217\u8868\"\n    url = \"/users\"\n    page = Page(...)\n</code></pre>"},{"location":"api/core/#amisview","title":"AmisView","text":"<p>\u89c6\u56fe\u57fa\u7c7b\uff0c\u6240\u6709\u9875\u9762\u89c6\u56fe\u90fd\u5e94\u7ee7\u627f\u6b64\u7c7b\u3002</p>"},{"location":"api/core/#_7","title":"\u7c7b\u5b9a\u4e49","text":"<pre><code>class AmisView:\n    page_schema: str\n    url: str\n    page: Page\n    icon: Optional[str] = None\n    visible: bool = True\n    dependencies: List[Depends] = []\n</code></pre>"},{"location":"api/core/#_8","title":"\u5c5e\u6027","text":"<ul> <li><code>page_schema</code> (str): \u9875\u9762\u63cf\u8ff0</li> <li><code>url</code> (str): \u8bbf\u95ee\u8def\u5f84</li> <li><code>page</code> (Page): Amis Page \u7ec4\u4ef6\u5b9e\u4f8b</li> <li><code>icon</code> (Optional[str]): \u9875\u9762\u56fe\u6807</li> <li><code>visible</code> (bool): \u662f\u5426\u5728\u5bfc\u822a\u4e2d\u663e\u793a</li> <li><code>dependencies</code> (List[Depends]): FastAPI \u4f9d\u8d56\u9879\u5217\u8868</li> </ul>"},{"location":"api/core/#_9","title":"\u793a\u4f8b","text":"<pre><code>class MyView(AmisView):\n    page_schema = \"\u6211\u7684\u9875\u9762\"\n    url = \"/my-page\"\n    page = Page(\n        title=\"\u9875\u9762\u6807\u9898\",\n        body=[...]\n    )\n</code></pre>"},{"location":"api/core/#_10","title":"\u9ad8\u7ea7\u7528\u6cd5","text":""},{"location":"api/core/#_11","title":"\u52a8\u6001\u9875\u9762","text":"<p>\u53ef\u4ee5\u901a\u8fc7\u65b9\u6cd5\u52a8\u6001\u751f\u6210\u9875\u9762\u5185\u5bb9\uff1a</p> <pre><code>class DynamicView(AmisView):\n    page_schema = \"\u52a8\u6001\u9875\u9762\"\n    url = \"/dynamic\"\n\n    def get_page(self, request: Request) -&gt; Page:\n        \"\"\"\u6839\u636e\u8bf7\u6c42\u52a8\u6001\u751f\u6210\u9875\u9762\"\"\"\n        user = request.state.user\n        return Page(\n            title=f\"\u6b22\u8fce {user.name}\",\n            body=[...]\n        )\n</code></pre>"},{"location":"api/core/#_12","title":"\u4f9d\u8d56\u6ce8\u5165","text":"<p>\u4f7f\u7528 FastAPI \u7684\u4f9d\u8d56\u6ce8\u5165\uff1a</p> <pre><code>from fastapi import Depends\n\ndef get_current_user(request: Request):\n    return request.state.user\n\nclass UserProfileView(AmisView):\n    page_schema = \"\u4e2a\u4eba\u8d44\u6599\"\n    url = \"/profile\"\n    dependencies = [Depends(get_current_user)]\n    page = Page(...)\n</code></pre>"},{"location":"api/core/#_13","title":"\u7c7b\u578b\u5b9a\u4e49","text":""},{"location":"api/core/#baseamismodel","title":"BaseAmisModel","text":"<p>\u6240\u6709 Amis \u7ec4\u4ef6\u7684\u57fa\u7c7b\u3002</p> <pre><code>from pydantic import BaseModel\n\nclass BaseAmisModel(BaseModel):\n    type: str\n\n    class Config:\n        extra = \"allow\"\n</code></pre>"},{"location":"api/core/#pageschema","title":"PageSchema","text":"<p>\u9875\u9762\u914d\u7f6e\u7684\u7c7b\u578b\u5b9a\u4e49\u3002</p> <pre><code>class PageSchema(BaseModel):\n    title: Optional[str] = None\n    subTitle: Optional[str] = None\n    body: Union[Dict, List, str]\n    toolbar: Optional[List] = None\n    aside: Optional[Dict] = None\n</code></pre>"},{"location":"api/core/#_14","title":"\u5de5\u5177\u51fd\u6570","text":""},{"location":"api/core/#create_app_from_site","title":"create_app_from_site","text":"<p>\u4ece\u7ad9\u70b9\u521b\u5efa FastAPI \u5e94\u7528\u7684\u4fbf\u6377\u51fd\u6570\u3002</p> <pre><code>def create_app_from_site(\n    site: AmisSite,\n    **fastapi_kwargs\n) -&gt; FastAPI:\n    \"\"\"\u521b\u5efa\u5e76\u914d\u7f6e FastAPI \u5e94\u7528\"\"\"\n    app = FastAPI(**fastapi_kwargs)\n    site.mount_to_app(app)\n    return app\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>site = AmisSite(title=\"\u7ba1\u7406\u540e\u53f0\")\n# ... \u914d\u7f6e\u7ad9\u70b9\n\napp = create_app_from_site(\n    site,\n    title=\"\u7ba1\u7406\u540e\u53f0 API\",\n    version=\"1.0.0\"\n)\n</code></pre>"},{"location":"api/core/#_15","title":"\u5f02\u5e38\u7c7b","text":""},{"location":"api/core/#amisexception","title":"AmisException","text":"<p>\u6846\u67b6\u7684\u57fa\u7840\u5f02\u5e38\u7c7b\u3002</p> <pre><code>class AmisException(Exception):\n    def __init__(\n        self,\n        message: str,\n        status_code: int = 400,\n        **kwargs\n    ):\n        self.message = message\n        self.status_code = status_code\n        self.extra = kwargs\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>from fastapi_amis.extensions.exception import AmisException\n\nif not user:\n    raise AmisException(\n        message=\"\u7528\u6237\u4e0d\u5b58\u5728\",\n        status_code=404\n    )\n</code></pre>"},{"location":"api/core/#_16","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>Amis \u7ec4\u4ef6 API - Amis \u7ec4\u4ef6\u7684 API \u53c2\u8003</li> <li>\u6269\u5c55\u529f\u80fd API - \u6269\u5c55\u6a21\u5757\u7684 API \u53c2\u8003</li> <li>\u7c7b\u578b\u5b9a\u4e49 - \u5b8c\u6574\u7684\u7c7b\u578b\u5b9a\u4e49</li> </ul>"},{"location":"api/extensions/","title":"\u6269\u5c55\u529f\u80fd API","text":"<p>FastAPI Amis \u6269\u5c55\u6a21\u5757\u7684 API \u53c2\u8003\u6587\u6863\u3002</p>"},{"location":"api/extensions/#_1","title":"\u5f02\u5e38\u5904\u7406","text":""},{"location":"api/extensions/#amisexception","title":"AmisException","text":"<p>\u6846\u67b6\u7684\u57fa\u7840\u5f02\u5e38\u7c7b\u3002</p> <pre><code>class AmisException(Exception):\n    \"\"\"Amis \u6846\u67b6\u57fa\u7840\u5f02\u5e38\"\"\"\n\n    def __init__(\n        self,\n        message: str,\n        status_code: int = 400,\n        error_code: Optional[str] = None,\n        **extra\n    ):\n        \"\"\"\n        Args:\n            message: \u9519\u8bef\u6d88\u606f\n            status_code: HTTP \u72b6\u6001\u7801\n            error_code: \u4e1a\u52a1\u9519\u8bef\u7801\n            **extra: \u989d\u5916\u7684\u9519\u8bef\u4fe1\u606f\n        \"\"\"\n        self.message = message\n        self.status_code = status_code\n        self.error_code = error_code\n        self.extra = extra\n        super().__init__(message)\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>from fastapi_amis.extensions.exception import AmisException\n\n# \u629b\u51fa\u5f02\u5e38\nraise AmisException(\n    message=\"\u7528\u6237\u4e0d\u5b58\u5728\",\n    status_code=404,\n    error_code=\"USER_NOT_FOUND\"\n)\n</code></pre>"},{"location":"api/extensions/#_2","title":"\u5f02\u5e38\u5904\u7406\u5668","text":"<p>\u6ce8\u518c\u5168\u5c40\u5f02\u5e38\u5904\u7406\u5668\uff1a</p> <pre><code>from fastapi import FastAPI\nfrom fastapi.responses import JSONResponse\nfrom fastapi_amis.extensions.exception import AmisException\n\napp = FastAPI()\n\n@app.exception_handler(AmisException)\nasync def amis_exception_handler(request, exc: AmisException):\n    \"\"\"\u5904\u7406 Amis \u5f02\u5e38\"\"\"\n    return JSONResponse(\n        status_code=exc.status_code,\n        content={\n            \"status\": 1,\n            \"msg\": exc.message,\n            \"code\": exc.error_code,\n            **exc.extra\n        }\n    )\n</code></pre>"},{"location":"api/extensions/#_3","title":"\u7ba1\u7406\u6269\u5c55","text":""},{"location":"api/extensions/#adminext","title":"AdminExt","text":"<p>\u7ba1\u7406\u540e\u53f0\u6269\u5c55\u57fa\u7c7b\u3002</p> <pre><code>class AdminExt:\n    \"\"\"\u7ba1\u7406\u540e\u53f0\u6269\u5c55\u57fa\u7c7b\"\"\"\n\n    def __init__(self, site: AmisSite):\n        self.site = site\n\n    def register(self) -&gt; None:\n        \"\"\"\u6ce8\u518c\u6269\u5c55\"\"\"\n        raise NotImplementedError\n</code></pre> <p>\u4f7f\u7528\u793a\u4f8b\uff1a</p> <pre><code>from fastapi_amis.extensions.admin import AdminExt\n\nclass UserAdminExt(AdminExt):\n    \"\"\"\u7528\u6237\u7ba1\u7406\u6269\u5c55\"\"\"\n\n    def register(self):\n        \"\"\"\u6ce8\u518c\u7528\u6237\u7ba1\u7406\u76f8\u5173\u89c6\u56fe\"\"\"\n        router = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\")\n\n        @router.register\n        class UserListView(AmisView):\n            ...\n\n        self.site.add_router(router)\n\n# \u4f7f\u7528\u6269\u5c55\nsite = AmisSite()\nuser_ext = UserAdminExt(site)\nuser_ext.register()\n</code></pre>"},{"location":"api/extensions/#_4","title":"\u65e5\u5fd7\u529f\u80fd","text":""},{"location":"api/extensions/#setup_logging","title":"setup_logging","text":"<p>\u914d\u7f6e\u65e5\u5fd7\u7cfb\u7edf\u3002</p> <pre><code>def setup_logging(\n    level: str = \"INFO\",\n    log_file: Optional[str] = None,\n    format_string: Optional[str] = None\n) -&gt; None:\n    \"\"\"\n    \u914d\u7f6e\u65e5\u5fd7\u7cfb\u7edf\n\n    Args:\n        level: \u65e5\u5fd7\u7ea7\u522b (DEBUG, INFO, WARNING, ERROR, CRITICAL)\n        log_file: \u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\n        format_string: \u65e5\u5fd7\u683c\u5f0f\u5b57\u7b26\u4e32\n    \"\"\"\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>from fastapi_amis.extensions.logging import setup_logging\n\n# \u57fa\u7840\u914d\u7f6e\nsetup_logging(level=\"INFO\")\n\n# \u8f93\u51fa\u5230\u6587\u4ef6\nsetup_logging(\n    level=\"DEBUG\",\n    log_file=\"app.log\"\n)\n\n# \u81ea\u5b9a\u4e49\u683c\u5f0f\nsetup_logging(\n    level=\"INFO\",\n    format_string=\"%(asctime)s - %(name)s - %(levelname)s - %(message)s\"\n)\n</code></pre>"},{"location":"api/extensions/#get_logger","title":"get_logger","text":"<p>\u83b7\u53d6\u65e5\u5fd7\u8bb0\u5f55\u5668\u3002</p> <pre><code>def get_logger(name: str) -&gt; logging.Logger:\n    \"\"\"\n    \u83b7\u53d6\u65e5\u5fd7\u8bb0\u5f55\u5668\n\n    Args:\n        name: \u8bb0\u5f55\u5668\u540d\u79f0\n\n    Returns:\n        logging.Logger: \u65e5\u5fd7\u8bb0\u5f55\u5668\u5b9e\u4f8b\n    \"\"\"\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>from fastapi_amis.extensions.logging import get_logger\n\nlogger = get_logger(__name__)\n\nlogger.debug(\"\u8c03\u8bd5\u4fe1\u606f\")\nlogger.info(\"\u666e\u901a\u4fe1\u606f\")\nlogger.warning(\"\u8b66\u544a\u4fe1\u606f\")\nlogger.error(\"\u9519\u8bef\u4fe1\u606f\")\nlogger.critical(\"\u4e25\u91cd\u9519\u8bef\")\n</code></pre>"},{"location":"api/extensions/#_5","title":"\u4e2d\u95f4\u4ef6","text":""},{"location":"api/extensions/#amismiddleware","title":"AmisMiddleware","text":"<p>Amis \u6846\u67b6\u4e2d\u95f4\u4ef6\u3002</p> <pre><code>class AmisMiddleware:\n    \"\"\"Amis \u4e2d\u95f4\u4ef6\"\"\"\n\n    def __init__(\n        self,\n        app: ASGIApp,\n        *,\n        cors_origins: List[str] = None,\n        request_id_header: str = \"X-Request-ID\"\n    ):\n        \"\"\"\n        Args:\n            app: ASGI \u5e94\u7528\n            cors_origins: CORS \u5141\u8bb8\u7684\u6e90\n            request_id_header: \u8bf7\u6c42 ID \u5934\u540d\u79f0\n        \"\"\"\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>from fastapi import FastAPI\nfrom fastapi_amis.extensions.middleware import AmisMiddleware\n\napp = FastAPI()\n\napp.add_middleware(\n    AmisMiddleware,\n    cors_origins=[\"http://localhost:3000\"],\n    request_id_header=\"X-Request-ID\"\n)\n</code></pre>"},{"location":"api/extensions/#_6","title":"\u5de5\u5177\u51fd\u6570","text":""},{"location":"api/extensions/#generate_schema","title":"generate_schema","text":"<p>\u751f\u6210 Amis Schema\u3002</p> <pre><code>def generate_schema(\n    component: BaseComponent,\n    *,\n    exclude_none: bool = True\n) -&gt; Dict:\n    \"\"\"\n    \u751f\u6210 Amis Schema\n\n    Args:\n        component: Amis \u7ec4\u4ef6\n        exclude_none: \u662f\u5426\u6392\u9664 None \u503c\n\n    Returns:\n        Dict: Amis Schema \u5b57\u5178\n    \"\"\"\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>from fastapi_amis.amis.components import Page\nfrom fastapi_amis.extensions.utils import generate_schema\n\npage = Page(title=\"\u6d4b\u8bd5\u9875\u9762\")\nschema = generate_schema(page)\n</code></pre>"},{"location":"api/extensions/#validate_amis_response","title":"validate_amis_response","text":"<p>\u9a8c\u8bc1 Amis API \u54cd\u5e94\u683c\u5f0f\u3002</p> <pre><code>def validate_amis_response(\n    response: Dict,\n    *,\n    strict: bool = False\n) -&gt; bool:\n    \"\"\"\n    \u9a8c\u8bc1 Amis API \u54cd\u5e94\u683c\u5f0f\n\n    Args:\n        response: \u54cd\u5e94\u6570\u636e\n        strict: \u662f\u5426\u4e25\u683c\u9a8c\u8bc1\n\n    Returns:\n        bool: \u662f\u5426\u6709\u6548\n\n    Raises:\n        ValueError: \u54cd\u5e94\u683c\u5f0f\u65e0\u6548\u65f6\u629b\u51fa\n    \"\"\"\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>from fastapi_amis.extensions.utils import validate_amis_response\n\nresponse = {\n    \"status\": 0,\n    \"msg\": \"ok\",\n    \"data\": {...}\n}\n\nis_valid = validate_amis_response(response)\n</code></pre>"},{"location":"api/extensions/#create_amis_response","title":"create_amis_response","text":"<p>\u521b\u5efa\u6807\u51c6\u7684 Amis API \u54cd\u5e94\u3002</p> <pre><code>def create_amis_response(\n    data: Any = None,\n    *,\n    status: int = 0,\n    msg: str = \"ok\",\n    **extra\n) -&gt; Dict:\n    \"\"\"\n    \u521b\u5efa Amis API \u54cd\u5e94\n\n    Args:\n        data: \u54cd\u5e94\u6570\u636e\n        status: \u72b6\u6001\u7801 (0=\u6210\u529f, \u975e0=\u5931\u8d25)\n        msg: \u6d88\u606f\n        **extra: \u989d\u5916\u7684\u54cd\u5e94\u5b57\u6bb5\n\n    Returns:\n        Dict: Amis \u54cd\u5e94\u5b57\u5178\n    \"\"\"\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>from fastapi_amis.extensions.utils import create_amis_response\n\n# \u6210\u529f\u54cd\u5e94\nresponse = create_amis_response(\n    data={\"items\": [...], \"total\": 100}\n)\n\n# \u5931\u8d25\u54cd\u5e94\nerror_response = create_amis_response(\n    status=1,\n    msg=\"\u64cd\u4f5c\u5931\u8d25\",\n    data=None\n)\n</code></pre>"},{"location":"api/extensions/#_7","title":"\u88c5\u9970\u5668","text":""},{"location":"api/extensions/#amis_api","title":"amis_api","text":"<p>API \u54cd\u5e94\u88c5\u9970\u5668\uff0c\u81ea\u52a8\u8f6c\u6362\u4e3a Amis \u683c\u5f0f\u3002</p> <pre><code>def amis_api(\n    *,\n    success_msg: str = \"\u64cd\u4f5c\u6210\u529f\",\n    error_msg: str = \"\u64cd\u4f5c\u5931\u8d25\"\n):\n    \"\"\"\n    Amis API \u88c5\u9970\u5668\n\n    Args:\n        success_msg: \u6210\u529f\u6d88\u606f\n        error_msg: \u5931\u8d25\u6d88\u606f\n    \"\"\"\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>from fastapi import APIRouter\nfrom fastapi_amis.extensions.decorators import amis_api\n\nrouter = APIRouter()\n\n@router.get(\"/users\")\n@amis_api(success_msg=\"\u83b7\u53d6\u7528\u6237\u5217\u8868\u6210\u529f\")\nasync def get_users():\n    users = await db.get_users()\n    return {\"items\": users, \"total\": len(users)}\n</code></pre>"},{"location":"api/extensions/#require_permissions","title":"require_permissions","text":"<p>\u6743\u9650\u68c0\u67e5\u88c5\u9970\u5668\u3002</p> <pre><code>def require_permissions(\n    *permissions: str,\n    check_all: bool = True\n):\n    \"\"\"\n    \u6743\u9650\u68c0\u67e5\u88c5\u9970\u5668\n\n    Args:\n        *permissions: \u9700\u8981\u7684\u6743\u9650\u5217\u8868\n        check_all: \u662f\u5426\u9700\u8981\u6240\u6709\u6743\u9650\uff08True\uff09\u8fd8\u662f\u4efb\u4e00\u6743\u9650\uff08False\uff09\n    \"\"\"\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>from fastapi_amis.extensions.decorators import require_permissions\n\n@router.get(\"/admin/users\")\n@require_permissions(\"user.read\", \"admin.access\", check_all=True)\nasync def get_admin_users():\n    return await db.get_all_users()\n</code></pre>"},{"location":"api/extensions/#_8","title":"\u7c7b\u578b\u5b9a\u4e49","text":""},{"location":"api/extensions/#amisresponse","title":"AmisResponse","text":"<p>Amis API \u54cd\u5e94\u7c7b\u578b\u3002</p> <pre><code>from typing import TypedDict, Any, Optional\n\nclass AmisResponse(TypedDict):\n    status: int\n    msg: str\n    data: Optional[Any]\n</code></pre>"},{"location":"api/extensions/#pagedata","title":"PageData","text":"<p>\u5206\u9875\u6570\u636e\u7c7b\u578b\u3002</p> <pre><code>class PageData(TypedDict):\n    items: List[Any]\n    total: int\n    page: Optional[int]\n    perPage: Optional[int]\n</code></pre>"},{"location":"api/extensions/#_9","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u6838\u5fc3\u6a21\u5757 API - \u6838\u5fc3\u6a21\u5757 API \u53c2\u8003</li> <li>Amis \u7ec4\u4ef6 API - \u7ec4\u4ef6 API \u53c2\u8003</li> <li>\u4f7f\u7528\u6307\u5357 - \u6df1\u5165\u4e86\u89e3\u6982\u5ff5</li> </ul>"},{"location":"best-practices/development/","title":"\u5f00\u53d1\u5efa\u8bae","text":"<p>\u672c\u6587\u6863\u63d0\u4f9b FastAPI Amis \u9879\u76ee\u7684\u5f00\u53d1\u6700\u4f73\u5b9e\u8df5\u548c\u5efa\u8bae\u3002</p>"},{"location":"best-practices/development/#_2","title":"\u4ee3\u7801\u89c4\u8303","text":""},{"location":"best-practices/development/#python","title":"Python \u4ee3\u7801\u98ce\u683c","text":"<p>\u9075\u5faa PEP 8 \u548c PEP 257 \u89c4\u8303\uff1a</p> <pre><code># \u597d\u7684\u793a\u4f8b\nfrom typing import Optional, List\nfrom fastapi_amis.core.views import AmisView\n\nclass UserListView(AmisView):\n    \"\"\"\u7528\u6237\u5217\u8868\u89c6\u56fe\u3002\n\n    \u5c55\u793a\u7cfb\u7edf\u4e2d\u6240\u6709\u7528\u6237\u7684\u5217\u8868\uff0c\u652f\u6301\u641c\u7d22\u548c\u7b5b\u9009\u3002\n    \"\"\"\n    page_schema = \"\u7528\u6237\u5217\u8868\"\n    url = \"/users\"\n\n    def get_page(self, request: Request) -&gt; Page:\n        \"\"\"\u6839\u636e\u8bf7\u6c42\u52a8\u6001\u751f\u6210\u9875\u9762\u3002\n\n        Args:\n            request: FastAPI \u8bf7\u6c42\u5bf9\u8c61\n\n        Returns:\n            Page: \u9875\u9762\u5bf9\u8c61\n        \"\"\"\n        return Page(...)\n</code></pre>"},{"location":"best-practices/development/#_3","title":"\u7c7b\u578b\u6ce8\u89e3","text":"<p>\u59cb\u7ec8\u4f7f\u7528\u7c7b\u578b\u6ce8\u89e3\uff1a</p> <pre><code>from typing import List, Optional, Dict, Any\n\ndef get_users(\n    page: int = 1,\n    per_page: int = 10,\n    search: Optional[str] = None\n) -&gt; Dict[str, Any]:\n    \"\"\"\u83b7\u53d6\u7528\u6237\u5217\u8868\"\"\"\n    ...\n</code></pre>"},{"location":"best-practices/development/#_4","title":"\u547d\u540d\u89c4\u8303","text":"<pre><code># \u53d8\u91cf\u548c\u51fd\u6570\uff1a\u5c0f\u5199\u4e0b\u5212\u7ebf\nuser_name = \"\u5f20\u4e09\"\ndef get_user_list(): ...\n\n# \u7c7b\uff1a\u5e15\u65af\u5361\u547d\u540d\nclass UserListView: ...\n\n# \u5e38\u91cf\uff1a\u5927\u5199\u4e0b\u5212\u7ebf\nMAX_PAGE_SIZE = 100\nDEFAULT_PAGE = 1\n\n# \u79c1\u6709\u5c5e\u6027/\u65b9\u6cd5\uff1a\u524d\u7f00\u4e0b\u5212\u7ebf\nclass MyClass:\n    def __init__(self):\n        self._private_var = \"private\"\n\n    def _private_method(self): ...\n</code></pre>"},{"location":"best-practices/development/#api","title":"API \u8bbe\u8ba1","text":""},{"location":"best-practices/development/#restful-api","title":"RESTful API","text":"<p>\u9075\u5faa REST \u539f\u5219\uff1a</p> <pre><code># \u597d\u7684 API \u8bbe\u8ba1\nGET    /api/users           # \u83b7\u53d6\u7528\u6237\u5217\u8868\nGET    /api/users/{id}      # \u83b7\u53d6\u5355\u4e2a\u7528\u6237\nPOST   /api/users           # \u521b\u5efa\u7528\u6237\nPUT    /api/users/{id}      # \u66f4\u65b0\u7528\u6237\nDELETE /api/users/{id}      # \u5220\u9664\u7528\u6237\n\n# \u907f\u514d\nGET    /api/getUserList\nPOST   /api/createUser\n</code></pre>"},{"location":"best-practices/development/#_5","title":"\u7edf\u4e00\u54cd\u5e94\u683c\u5f0f","text":"<p>\u4f7f\u7528 Amis \u6807\u51c6\u54cd\u5e94\u683c\u5f0f\uff1a</p> <pre><code>from typing import Any, Optional\n\ndef success_response(\n    data: Any = None,\n    msg: str = \"\u64cd\u4f5c\u6210\u529f\"\n) -&gt; dict:\n    \"\"\"\u6210\u529f\u54cd\u5e94\"\"\"\n    return {\n        \"status\": 0,\n        \"msg\": msg,\n        \"data\": data\n    }\n\ndef error_response(\n    msg: str,\n    status: int = 1\n) -&gt; dict:\n    \"\"\"\u9519\u8bef\u54cd\u5e94\"\"\"\n    return {\n        \"status\": status,\n        \"msg\": msg,\n        \"data\": None\n    }\n</code></pre>"},{"location":"best-practices/development/#_6","title":"\u5206\u9875\u5904\u7406","text":"<p>\u7edf\u4e00\u7684\u5206\u9875\u53c2\u6570\u548c\u54cd\u5e94\uff1a</p> <pre><code>from fastapi import Query\n\nasync def get_users(\n    page: int = Query(1, ge=1, description=\"\u9875\u7801\"),\n    perPage: int = Query(10, ge=1, le=100, description=\"\u6bcf\u9875\u6570\u91cf\"),\n    orderBy: Optional[str] = Query(None, description=\"\u6392\u5e8f\u5b57\u6bb5\"),\n    orderDir: Optional[str] = Query(\"asc\", regex=\"^(asc|desc)$\", description=\"\u6392\u5e8f\u65b9\u5411\")\n):\n    # \u8ba1\u7b97\u504f\u79fb\u91cf\n    offset = (page - 1) * perPage\n\n    # \u67e5\u8be2\u6570\u636e\n    users = await db.get_users(offset=offset, limit=perPage)\n    total = await db.count_users()\n\n    return {\n        \"status\": 0,\n        \"msg\": \"ok\",\n        \"data\": {\n            \"items\": users,\n            \"total\": total,\n            \"page\": page,\n            \"perPage\": perPage\n        }\n    }\n</code></pre>"},{"location":"best-practices/development/#_7","title":"\u9519\u8bef\u5904\u7406","text":""},{"location":"best-practices/development/#_8","title":"\u5168\u5c40\u5f02\u5e38\u5904\u7406","text":"<pre><code>from fastapi import FastAPI, Request\nfrom fastapi.responses import JSONResponse\n\napp = FastAPI()\n\n@app.exception_handler(Exception)\nasync def global_exception_handler(request: Request, exc: Exception):\n    \"\"\"\u5168\u5c40\u5f02\u5e38\u5904\u7406\u5668\"\"\"\n    return JSONResponse(\n        status_code=500,\n        content={\n            \"status\": 1,\n            \"msg\": str(exc),\n            \"data\": None\n        }\n    )\n</code></pre>"},{"location":"best-practices/development/#_9","title":"\u4e1a\u52a1\u5f02\u5e38","text":"<p>\u5b9a\u4e49\u6e05\u6670\u7684\u4e1a\u52a1\u5f02\u5e38\uff1a</p> <pre><code>class BusinessException(Exception):\n    \"\"\"\u4e1a\u52a1\u5f02\u5e38\u57fa\u7c7b\"\"\"\n\n    def __init__(self, message: str, code: str = None):\n        self.message = message\n        self.code = code\n        super().__init__(message)\n\nclass UserNotFoundException(BusinessException):\n    \"\"\"\u7528\u6237\u4e0d\u5b58\u5728\u5f02\u5e38\"\"\"\n\n    def __init__(self, user_id: int):\n        super().__init__(\n            message=f\"\u7528\u6237 {user_id} \u4e0d\u5b58\u5728\",\n            code=\"USER_NOT_FOUND\"\n        )\n</code></pre>"},{"location":"best-practices/development/#_10","title":"\u6570\u636e\u9a8c\u8bc1","text":""},{"location":"best-practices/development/#pydantic","title":"\u4f7f\u7528 Pydantic","text":"<p>\u5145\u5206\u5229\u7528 Pydantic \u7684\u9a8c\u8bc1\u529f\u80fd\uff1a</p> <pre><code>from pydantic import BaseModel, Field, EmailStr, validator\n\nclass UserCreate(BaseModel):\n    username: str = Field(..., min_length=3, max_length=20)\n    email: EmailStr\n    password: str = Field(..., min_length=6)\n    age: Optional[int] = Field(None, ge=0, le=150)\n\n    @validator('username')\n    def username_alphanumeric(cls, v):\n        \"\"\"\u9a8c\u8bc1\u7528\u6237\u540d\u53ea\u5305\u542b\u5b57\u6bcd\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\"\"\"\n        if not v.replace('_', '').isalnum():\n            raise ValueError('\u7528\u6237\u540d\u53ea\u80fd\u5305\u542b\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf')\n        return v\n</code></pre>"},{"location":"best-practices/development/#_11","title":"\u6027\u80fd\u4f18\u5316","text":""},{"location":"best-practices/development/#_12","title":"\u6570\u636e\u5e93\u67e5\u8be2\u4f18\u5316","text":"<pre><code># \u4f7f\u7528\u7d22\u5f15\nclass User(Base):\n    __tablename__ = \"users\"\n\n    id = Column(Integer, primary_key=True, index=True)\n    email = Column(String, unique=True, index=True)  # \u6dfb\u52a0\u7d22\u5f15\n    username = Column(String, unique=True, index=True)\n\n# \u4f7f\u7528\u9884\u52a0\u8f7d\u907f\u514d N+1 \u67e5\u8be2\nfrom sqlalchemy.orm import joinedload\n\nusers = db.query(User)\\\n    .options(joinedload(User.profile))\\\n    .all()\n\n# \u53ea\u67e5\u8be2\u9700\u8981\u7684\u5b57\u6bb5\nusers = db.query(User.id, User.username, User.email).all()\n</code></pre>"},{"location":"best-practices/development/#_13","title":"\u5f02\u6b65\u5904\u7406","text":"<p>\u5bf9\u4e8e\u8017\u65f6\u64cd\u4f5c\u4f7f\u7528\u5f02\u6b65\uff1a</p> <pre><code>from fastapi import BackgroundTasks\n\n@app.post(\"/users\")\nasync def create_user(\n    user: UserCreate,\n    background_tasks: BackgroundTasks\n):\n    # \u521b\u5efa\u7528\u6237\n    db_user = await create_user_in_db(user)\n\n    # \u540e\u53f0\u53d1\u9001\u6b22\u8fce\u90ae\u4ef6\n    background_tasks.add_task(send_welcome_email, db_user.email)\n\n    return success_response(db_user)\n</code></pre>"},{"location":"best-practices/development/#_14","title":"\u7f13\u5b58","text":"<p>\u4f7f\u7528\u7f13\u5b58\u51cf\u5c11\u6570\u636e\u5e93\u67e5\u8be2\uff1a</p> <pre><code>from functools import lru_cache\n\n@lru_cache(maxsize=128)\ndef get_user_permissions(user_id: int) -&gt; List[str]:\n    \"\"\"\u83b7\u53d6\u7528\u6237\u6743\u9650\uff08\u5e26\u7f13\u5b58\uff09\"\"\"\n    return db.query(Permission)\\\n        .join(UserPermission)\\\n        .filter(UserPermission.user_id == user_id)\\\n        .all()\n</code></pre>"},{"location":"best-practices/development/#_15","title":"\u5b89\u5168\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"best-practices/development/#_16","title":"\u5bc6\u7801\u5904\u7406","text":"<pre><code>from passlib.context import CryptContext\n\npwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\n\ndef hash_password(password: str) -&gt; str:\n    \"\"\"\u54c8\u5e0c\u5bc6\u7801\"\"\"\n    return pwd_context.hash(password)\n\ndef verify_password(plain_password: str, hashed_password: str) -&gt; bool:\n    \"\"\"\u9a8c\u8bc1\u5bc6\u7801\"\"\"\n    return pwd_context.verify(plain_password, hashed_password)\n</code></pre>"},{"location":"best-practices/development/#_17","title":"\u8ba4\u8bc1\u548c\u6388\u6743","text":"<pre><code>from fastapi import Depends, HTTPException, status\nfrom fastapi.security import OAuth2PasswordBearer\n\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")\n\nasync def get_current_user(token: str = Depends(oauth2_scheme)):\n    \"\"\"\u83b7\u53d6\u5f53\u524d\u7528\u6237\"\"\"\n    credentials_exception = HTTPException(\n        status_code=status.HTTP_401_UNAUTHORIZED,\n        detail=\"\u65e0\u6cd5\u9a8c\u8bc1\u51ed\u8bc1\",\n        headers={\"WWW-Authenticate\": \"Bearer\"},\n    )\n\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        user_id: int = payload.get(\"sub\")\n        if user_id is None:\n            raise credentials_exception\n    except JWTError:\n        raise credentials_exception\n\n    user = await get_user(user_id)\n    if user is None:\n        raise credentials_exception\n\n    return user\n</code></pre>"},{"location":"best-practices/development/#_18","title":"\u8f93\u5165\u9a8c\u8bc1","text":"<p>\u6c38\u8fdc\u4e0d\u8981\u4fe1\u4efb\u7528\u6237\u8f93\u5165\uff1a</p> <pre><code>from pydantic import BaseModel, validator\nimport re\n\nclass UserInput(BaseModel):\n    username: str\n\n    @validator('username')\n    def validate_username(cls, v):\n        \"\"\"\u9a8c\u8bc1\u7528\u6237\u540d\u5b89\u5168\u6027\"\"\"\n        # \u9632\u6b62 SQL \u6ce8\u5165\u548c XSS\n        if re.search(r'[&lt;&gt;\\'\"]', v):\n            raise ValueError('\u7528\u6237\u540d\u5305\u542b\u975e\u6cd5\u5b57\u7b26')\n        return v\n</code></pre>"},{"location":"best-practices/development/#_19","title":"\u6d4b\u8bd5","text":""},{"location":"best-practices/development/#_20","title":"\u5355\u5143\u6d4b\u8bd5","text":"<pre><code>import pytest\nfrom httpx import AsyncClient\nfrom app.main import app\n\n@pytest.mark.asyncio\nasync def test_create_user():\n    \"\"\"\u6d4b\u8bd5\u521b\u5efa\u7528\u6237\"\"\"\n    async with AsyncClient(app=app, base_url=\"http://test\") as ac:\n        response = await ac.post(\n            \"/api/users\",\n            json={\n                \"username\": \"testuser\",\n                \"email\": \"test@example.com\",\n                \"password\": \"password123\"\n            }\n        )\n\n    assert response.status_code == 200\n    data = response.json()\n    assert data[\"status\"] == 0\n    assert \"id\" in data[\"data\"]\n</code></pre>"},{"location":"best-practices/development/#_21","title":"\u96c6\u6210\u6d4b\u8bd5","text":"<pre><code>@pytest.mark.asyncio\nasync def test_user_workflow():\n    \"\"\"\u6d4b\u8bd5\u7528\u6237\u5b8c\u6574\u6d41\u7a0b\"\"\"\n    async with AsyncClient(app=app, base_url=\"http://test\") as ac:\n        # \u521b\u5efa\u7528\u6237\n        response = await ac.post(\"/api/users\", json={...})\n        user_id = response.json()[\"data\"][\"id\"]\n\n        # \u83b7\u53d6\u7528\u6237\n        response = await ac.get(f\"/api/users/{user_id}\")\n        assert response.status_code == 200\n\n        # \u66f4\u65b0\u7528\u6237\n        response = await ac.put(f\"/api/users/{user_id}\", json={...})\n        assert response.status_code == 200\n\n        # \u5220\u9664\u7528\u6237\n        response = await ac.delete(f\"/api/users/{user_id}\")\n        assert response.status_code == 200\n</code></pre>"},{"location":"best-practices/development/#_22","title":"\u65e5\u5fd7\u8bb0\u5f55","text":""},{"location":"best-practices/development/#_23","title":"\u7ed3\u6784\u5316\u65e5\u5fd7","text":"<pre><code>import logging\nfrom typing import Any, Dict\n\nlogger = logging.getLogger(__name__)\n\ndef log_operation(\n    operation: str,\n    user_id: int,\n    details: Dict[str, Any] = None\n):\n    \"\"\"\u8bb0\u5f55\u64cd\u4f5c\u65e5\u5fd7\"\"\"\n    logger.info(\n        f\"Operation: {operation}\",\n        extra={\n            \"user_id\": user_id,\n            \"operation\": operation,\n            \"details\": details or {}\n        }\n    )\n\n# \u4f7f\u7528\nlog_operation(\n    operation=\"create_user\",\n    user_id=request.state.user.id,\n    details={\"username\": \"newuser\"}\n)\n</code></pre>"},{"location":"best-practices/development/#_24","title":"\u6587\u6863","text":""},{"location":"best-practices/development/#api_1","title":"API \u6587\u6863","text":"<p>\u4f7f\u7528 FastAPI \u7684\u81ea\u52a8\u6587\u6863\u529f\u80fd\uff1a</p> <pre><code>@app.post(\n    \"/users\",\n    response_model=UserResponse,\n    summary=\"\u521b\u5efa\u7528\u6237\",\n    description=\"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7528\u6237\u8d26\u6237\",\n    responses={\n        200: {\"description\": \"\u521b\u5efa\u6210\u529f\"},\n        400: {\"description\": \"\u8bf7\u6c42\u53c2\u6570\u9519\u8bef\"},\n        409: {\"description\": \"\u7528\u6237\u540d\u6216\u90ae\u7bb1\u5df2\u5b58\u5728\"}\n    }\n)\nasync def create_user(user: UserCreate):\n    \"\"\"\n    \u521b\u5efa\u65b0\u7528\u6237\u3002\n\n    - **username**: \u7528\u6237\u540d\uff083-20\u4e2a\u5b57\u7b26\uff09\n    - **email**: \u90ae\u7bb1\u5730\u5740\n    - **password**: \u5bc6\u7801\uff08\u81f3\u5c116\u4e2a\u5b57\u7b26\uff09\n    \"\"\"\n    ...\n</code></pre>"},{"location":"best-practices/development/#_25","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u9879\u76ee\u7ed3\u6784 - \u4e86\u89e3\u63a8\u8350\u7684\u9879\u76ee\u7ed3\u6784</li> <li>\u793a\u4f8b\u9879\u76ee - \u67e5\u770b\u5b8c\u6574\u793a\u4f8b</li> <li>API \u53c2\u8003 - \u67e5\u770bAPI\u6587\u6863</li> </ul>"},{"location":"best-practices/project-structure/","title":"\u9879\u76ee\u7ed3\u6784","text":"<p>\u826f\u597d\u7684\u9879\u76ee\u7ed3\u6784\u6709\u52a9\u4e8e\u4ee3\u7801\u7684\u7ef4\u62a4\u548c\u6269\u5c55\u3002</p>"},{"location":"best-practices/project-structure/#_2","title":"\u63a8\u8350\u7ed3\u6784","text":"<pre><code>my-admin-project/\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 main.py              # \u5e94\u7528\u5165\u53e3\n\u2502   \u251c\u2500\u2500 config.py            # \u914d\u7f6e\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 models/              # \u6570\u636e\u6a21\u578b\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2502   \u2514\u2500\u2500 product.py\n\u2502   \u251c\u2500\u2500 schemas/             # Pydantic \u6a21\u5f0f\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2502   \u2514\u2500\u2500 product.py\n\u2502   \u251c\u2500\u2500 api/                 # API \u8def\u7531\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 deps.py          # \u4f9d\u8d56\u9879\n\u2502   \u2502   \u251c\u2500\u2500 users.py\n\u2502   \u2502   \u2514\u2500\u2500 products.py\n\u2502   \u251c\u2500\u2500 admin/               # \u7ba1\u7406\u540e\u53f0\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 site.py          # \u7ad9\u70b9\u914d\u7f6e\n\u2502   \u2502   \u251c\u2500\u2500 routers/         # \u7ba1\u7406\u8def\u7531\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 product.py\n\u2502   \u2502   \u2514\u2500\u2500 views/           # \u7ba1\u7406\u89c6\u56fe\n\u2502   \u2502       \u251c\u2500\u2500 __init__.py\n\u2502   \u2502       \u251c\u2500\u2500 user.py\n\u2502   \u2502       \u2514\u2500\u2500 product.py\n\u2502   \u251c\u2500\u2500 core/                # \u6838\u5fc3\u529f\u80fd\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 security.py      # \u5b89\u5168\u76f8\u5173\n\u2502   \u2502   \u2514\u2500\u2500 database.py      # \u6570\u636e\u5e93\u8fde\u63a5\n\u2502   \u2514\u2500\u2500 utils/               # \u5de5\u5177\u51fd\u6570\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u2514\u2500\u2500 helpers.py\n\u251c\u2500\u2500 tests/                   # \u6d4b\u8bd5\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 conftest.py\n\u2502   \u251c\u2500\u2500 test_api/\n\u2502   \u2514\u2500\u2500 test_admin/\n\u251c\u2500\u2500 alembic/                 # \u6570\u636e\u5e93\u8fc1\u79fb\n\u2502   \u2514\u2500\u2500 versions/\n\u251c\u2500\u2500 static/                  # \u9759\u6001\u6587\u4ef6\n\u251c\u2500\u2500 templates/               # \u6a21\u677f\u6587\u4ef6\n\u251c\u2500\u2500 .env                     # \u73af\u5883\u53d8\u91cf\n\u251c\u2500\u2500 .env.example             # \u73af\u5883\u53d8\u91cf\u793a\u4f8b\n\u251c\u2500\u2500 pyproject.toml           # \u9879\u76ee\u914d\u7f6e\n\u251c\u2500\u2500 README.md                # \u9879\u76ee\u8bf4\u660e\n\u2514\u2500\u2500 requirements.txt         # \u4f9d\u8d56\u5217\u8868\uff08\u53ef\u9009\uff09\n</code></pre>"},{"location":"best-practices/project-structure/#_3","title":"\u6587\u4ef6\u8bf4\u660e","text":""},{"location":"best-practices/project-structure/#appmainpy","title":"app/main.py","text":"<p>\u5e94\u7528\u5165\u53e3\u6587\u4ef6\uff1a</p> <pre><code>from fastapi import FastAPI\nfrom app.admin.site import create_admin_site\nfrom app.api import users, products\nfrom app.config import settings\n\napp = FastAPI(\n    title=settings.APP_TITLE,\n    version=settings.APP_VERSION\n)\n\n# \u6ce8\u518c API \u8def\u7531\napp.include_router(users.router, prefix=\"/api/users\", tags=[\"users\"])\napp.include_router(products.router, prefix=\"/api/products\", tags=[\"products\"])\n\n# \u6302\u8f7d\u7ba1\u7406\u540e\u53f0\nadmin_site = create_admin_site()\nadmin_site.mount_to_app(app, prefix=\"/admin\")\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(\n        \"app.main:app\",\n        host=settings.HOST,\n        port=settings.PORT,\n        reload=settings.DEBUG\n    )\n</code></pre>"},{"location":"best-practices/project-structure/#appconfigpy","title":"app/config.py","text":"<p>\u914d\u7f6e\u7ba1\u7406\uff1a</p> <pre><code>from pydantic_settings import BaseSettings\n\nclass Settings(BaseSettings):\n    APP_TITLE: str = \"\u7ba1\u7406\u7cfb\u7edf\"\n    APP_VERSION: str = \"1.0.0\"\n    HOST: str = \"0.0.0.0\"\n    PORT: int = 8000\n    DEBUG: bool = False\n\n    # \u6570\u636e\u5e93\u914d\u7f6e\n    DATABASE_URL: str\n\n    # \u5b89\u5168\u914d\u7f6e\n    SECRET_KEY: str\n    ALGORITHM: str = \"HS256\"\n    ACCESS_TOKEN_EXPIRE_MINUTES: int = 30\n\n    class Config:\n        env_file = \".env\"\n\nsettings = Settings()\n</code></pre>"},{"location":"best-practices/project-structure/#appmodelsuserpy","title":"app/models/user.py","text":"<p>\u6570\u636e\u6a21\u578b\uff1a</p> <pre><code>from sqlalchemy import Column, Integer, String, Boolean\nfrom app.core.database import Base\n\nclass User(Base):\n    __tablename__ = \"users\"\n\n    id = Column(Integer, primary_key=True, index=True)\n    username = Column(String, unique=True, index=True)\n    email = Column(String, unique=True, index=True)\n    hashed_password = Column(String)\n    is_active = Column(Boolean, default=True)\n    is_admin = Column(Boolean, default=False)\n</code></pre>"},{"location":"best-practices/project-structure/#appschemasuserpy","title":"app/schemas/user.py","text":"<p>Pydantic \u6a21\u5f0f\uff1a</p> <pre><code>from pydantic import BaseModel, EmailStr\n\nclass UserBase(BaseModel):\n    username: str\n    email: EmailStr\n\nclass UserCreate(UserBase):\n    password: str\n\nclass UserUpdate(UserBase):\n    password: Optional[str] = None\n\nclass UserInDB(UserBase):\n    id: int\n    is_active: bool\n    is_admin: bool\n\n    class Config:\n        from_attributes = True\n</code></pre>"},{"location":"best-practices/project-structure/#appapiuserspy","title":"app/api/users.py","text":"<p>API \u8def\u7531\uff1a</p> <pre><code>from fastapi import APIRouter, Depends, HTTPException\nfrom sqlalchemy.orm import Session\nfrom app.core.database import get_db\nfrom app.schemas.user import UserCreate, UserInDB\nfrom app.models.user import User\n\nrouter = APIRouter()\n\n@router.get(\"/\", response_model=dict)\nasync def get_users(\n    page: int = 1,\n    perPage: int = 10,\n    db: Session = Depends(get_db)\n):\n    users = db.query(User).offset((page - 1) * perPage).limit(perPage).all()\n    total = db.query(User).count()\n\n    return {\n        \"status\": 0,\n        \"msg\": \"ok\",\n        \"data\": {\n            \"items\": users,\n            \"total\": total\n        }\n    }\n\n@router.post(\"/\", response_model=dict)\nasync def create_user(\n    user: UserCreate,\n    db: Session = Depends(get_db)\n):\n    db_user = User(**user.dict())\n    db.add(db_user)\n    db.commit()\n    db.refresh(db_user)\n\n    return {\n        \"status\": 0,\n        \"msg\": \"\u521b\u5efa\u6210\u529f\",\n        \"data\": db_user\n    }\n</code></pre>"},{"location":"best-practices/project-structure/#appadminsitepy","title":"app/admin/site.py","text":"<p>\u7ba1\u7406\u7ad9\u70b9\u914d\u7f6e\uff1a</p> <pre><code>from fastapi_amis.core.site import AmisSite\nfrom app.admin.routers.user import user_router\nfrom app.admin.routers.product import product_router\n\ndef create_admin_site() -&gt; AmisSite:\n    site = AmisSite(\n        title=\"\u7ba1\u7406\u540e\u53f0\",\n        logo=\"https://example.com/logo.png\"\n    )\n\n    # \u6ce8\u518c\u8def\u7531\n    site.add_router(user_router)\n    site.add_router(product_router)\n\n    return site\n</code></pre>"},{"location":"best-practices/project-structure/#appadminroutersuserpy","title":"app/admin/routers/user.py","text":"<p>\u7ba1\u7406\u8def\u7531\uff1a</p> <pre><code>from fastapi_amis.core.router import AmisViewRouter\nfrom app.admin.views.user import UserListView, UserFormView\n\nuser_router = AmisViewRouter(\n    name=\"\u7528\u6237\u7ba1\u7406\",\n    icon=\"fa fa-users\"\n)\n\n# \u6ce8\u518c\u89c6\u56fe\nuser_router.register(UserListView)\nuser_router.register(UserFormView)\n</code></pre>"},{"location":"best-practices/project-structure/#appadminviewsuserpy","title":"app/admin/views/user.py","text":"<p>\u7ba1\u7406\u89c6\u56fe\uff1a</p> <pre><code>from fastapi_amis.core.views import AmisView\nfrom fastapi_amis.amis.components import Page\n\nclass UserListView(AmisView):\n    page_schema = \"\u7528\u6237\u5217\u8868\"\n    url = \"/users\"\n\n    page = Page(\n        title=\"\u7528\u6237\u7ba1\u7406\",\n        body={\n            \"type\": \"crud\",\n            \"api\": \"/api/users\",\n            \"columns\": [\n                {\"name\": \"id\", \"label\": \"ID\"},\n                {\"name\": \"username\", \"label\": \"\u7528\u6237\u540d\"},\n                {\"name\": \"email\", \"label\": \"\u90ae\u7bb1\"},\n            ]\n        }\n    )\n\nclass UserFormView(AmisView):\n    page_schema = \"\u6dfb\u52a0\u7528\u6237\"\n    url = \"/users/new\"\n\n    page = Page(\n        title=\"\u6dfb\u52a0\u7528\u6237\",\n        body={\n            \"type\": \"form\",\n            \"api\": \"post:/api/users\",\n            \"body\": [\n                {\n                    \"type\": \"input-text\",\n                    \"name\": \"username\",\n                    \"label\": \"\u7528\u6237\u540d\",\n                    \"required\": True\n                },\n                {\n                    \"type\": \"input-email\",\n                    \"name\": \"email\",\n                    \"label\": \"\u90ae\u7bb1\",\n                    \"required\": True\n                }\n            ]\n        }\n    )\n</code></pre>"},{"location":"best-practices/project-structure/#_4","title":"\u6a21\u5757\u5316\u7ec4\u7ec7","text":""},{"location":"best-practices/project-structure/#_5","title":"\u6309\u529f\u80fd\u6a21\u5757\u5206\u7ec4","text":"<pre><code>app/\n\u251c\u2500\u2500 modules/\n\u2502   \u251c\u2500\u2500 auth/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 models.py\n\u2502   \u2502   \u251c\u2500\u2500 schemas.py\n\u2502   \u2502   \u251c\u2500\u2500 api.py\n\u2502   \u2502   \u2514\u2500\u2500 admin.py\n\u2502   \u251c\u2500\u2500 users/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 models.py\n\u2502   \u2502   \u251c\u2500\u2500 schemas.py\n\u2502   \u2502   \u251c\u2500\u2500 api.py\n\u2502   \u2502   \u2514\u2500\u2500 admin.py\n\u2502   \u2514\u2500\u2500 products/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 models.py\n\u2502       \u251c\u2500\u2500 schemas.py\n\u2502       \u251c\u2500\u2500 api.py\n\u2502       \u2514\u2500\u2500 admin.py\n</code></pre>"},{"location":"best-practices/project-structure/#_6","title":"\u6309\u5c42\u6b21\u5206\u7ec4","text":"<pre><code>app/\n\u251c\u2500\u2500 domain/          # \u9886\u57df\u6a21\u578b\n\u251c\u2500\u2500 application/     # \u5e94\u7528\u670d\u52a1\n\u251c\u2500\u2500 infrastructure/  # \u57fa\u7840\u8bbe\u65bd\n\u2514\u2500\u2500 presentation/    # \u8868\u73b0\u5c42\n    \u251c\u2500\u2500 api/\n    \u2514\u2500\u2500 admin/\n</code></pre>"},{"location":"best-practices/project-structure/#_7","title":"\u914d\u7f6e\u6587\u4ef6\u7ec4\u7ec7","text":""},{"location":"best-practices/project-structure/#_8","title":"\u591a\u73af\u5883\u914d\u7f6e","text":"<pre><code>app/\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 base.py       # \u57fa\u7840\u914d\u7f6e\n\u2502   \u251c\u2500\u2500 development.py # \u5f00\u53d1\u73af\u5883\n\u2502   \u251c\u2500\u2500 production.py  # \u751f\u4ea7\u73af\u5883\n\u2502   \u2514\u2500\u2500 testing.py     # \u6d4b\u8bd5\u73af\u5883\n</code></pre>"},{"location":"best-practices/project-structure/#_9","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u5f00\u53d1\u5efa\u8bae - \u5f00\u53d1\u6700\u4f73\u5b9e\u8df5</li> <li>\u793a\u4f8b\u9879\u76ee - \u67e5\u770b\u5b9e\u9645\u9879\u76ee</li> </ul>"},{"location":"getting-started/examples/","title":"\u793a\u4f8b\u9879\u76ee","text":"<p>FastAPI Amis \u63d0\u4f9b\u4e86\u591a\u4e2a\u793a\u4f8b\u9879\u76ee\uff0c\u5e2e\u52a9\u4f60\u5feb\u901f\u4e0a\u624b\u548c\u5b66\u4e60\u4e0d\u540c\u7684\u529f\u80fd\u3002</p>"},{"location":"getting-started/examples/#_2","title":"\u8fd0\u884c\u793a\u4f8b","text":"<p>\u9996\u5148\u514b\u9686\u9879\u76ee\u4ed3\u5e93\uff1a</p> <pre><code>git clone https://github.com/InfernalAzazel/fastapi-amis.git\ncd fastapi-amis\n</code></pre> <p>\u5b89\u88c5\u4f9d\u8d56\uff1a</p> <pre><code>uv sync\n# \u6216\npip install -e \".[dev]\"\n</code></pre>"},{"location":"getting-started/examples/#1","title":"\u793a\u4f8b 1\uff1a\u7b80\u5355\u7ba1\u7406\u540e\u53f0","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u5feb\u901f\u642d\u5efa\u4e00\u4e2a\u7ba1\u7406\u540e\u53f0\u3002</p>"},{"location":"getting-started/examples/#_3","title":"\u8fd0\u884c\u793a\u4f8b","text":"<pre><code>cd example\nuv run python simple_example.py\n# \u6216\npython simple_example.py\n</code></pre> <p>\u8bbf\u95ee\uff1ahttp://localhost:4000</p>"},{"location":"getting-started/examples/#_4","title":"\u4ee3\u7801\u4f4d\u7f6e","text":"<p><code>example/simple_example.py</code></p>"},{"location":"getting-started/examples/#_5","title":"\u529f\u80fd\u5c55\u793a","text":"<ul> <li>\u2705 \u57fa\u672c\u7684\u9875\u9762\u7ed3\u6784</li> <li>\u2705 \u4fa7\u8fb9\u680f\u5bfc\u822a</li> <li>\u2705 \u7b80\u5355\u7684 CRUD \u64cd\u4f5c</li> <li>\u2705 \u8868\u5355\u7ec4\u4ef6</li> <li>\u2705 \u8868\u683c\u7ec4\u4ef6</li> </ul>"},{"location":"getting-started/examples/#_6","title":"\u6838\u5fc3\u4ee3\u7801","text":"<pre><code>from fastapi import FastAPI\nfrom fastapi_amis.core.router import AmisViewRouter\nfrom fastapi_amis.core.site import AmisSite\n\ndef create_app():\n    app = FastAPI()\n    site = AmisSite(title=\"\u7b80\u5355\u793a\u4f8b\")\n\n    # \u6dfb\u52a0\u8def\u7531\u548c\u89c6\u56fe\n    router = AmisViewRouter(name=\"\u9996\u9875\", type=\"page\")\n    # ... \u6ce8\u518c\u89c6\u56fe\n\n    site.add_router(router)\n    site.mount_to_app(app)\n    return app\n</code></pre>"},{"location":"getting-started/examples/#2","title":"\u793a\u4f8b 2\uff1a\u591a\u9875\u9762\u5e94\u7528","text":"<p>\u8fd9\u4e2a\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u591a\u4e2a\u9875\u9762\u548c\u529f\u80fd\u6a21\u5757\u7684\u5b8c\u6574\u5e94\u7528\u3002</p>"},{"location":"getting-started/examples/#_7","title":"\u8fd0\u884c\u793a\u4f8b","text":"<pre><code>cd example\nuv run python main.py\n# \u6216\npython main.py\n</code></pre> <p>\u8bbf\u95ee\uff1ahttp://localhost:3000</p>"},{"location":"getting-started/examples/#_8","title":"\u4ee3\u7801\u4f4d\u7f6e","text":"<p><code>example/main.py</code></p>"},{"location":"getting-started/examples/#_9","title":"\u529f\u80fd\u5c55\u793a","text":"<ul> <li>\u2705 \u591a\u4e2a\u9875\u9762\u8def\u7531</li> <li>\u2705 \u4eea\u8868\u76d8\u5c55\u793a</li> <li>\u2705 \u7528\u6237\u7ba1\u7406</li> <li>\u2705 \u7cfb\u7edf\u8bbe\u7f6e</li> <li>\u2705 \u6570\u636e\u53ef\u89c6\u5316</li> <li>\u2705 \u590d\u6742\u8868\u5355</li> </ul>"},{"location":"getting-started/examples/#_10","title":"\u6838\u5fc3\u4ee3\u7801","text":"<pre><code>app = FastAPI()\nsite = AmisSite(title=\"\u591a\u9875\u9762\u793a\u4f8b\")\n\n# \u4eea\u8868\u76d8\ndashboard_router = AmisViewRouter(name=\"\u4eea\u8868\u76d8\", type=\"page\")\n# ... \u6ce8\u518c\u4eea\u8868\u76d8\u89c6\u56fe\n\n# \u7528\u6237\u7ba1\u7406\nuser_router = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\", type=\"page\")\n# ... \u6ce8\u518c\u7528\u6237\u89c6\u56fe\n\n# \u6dfb\u52a0\u6240\u6709\u8def\u7531\nsite.add_router(dashboard_router)\nsite.add_router(user_router)\nsite.mount_to_app(app)\n</code></pre>"},{"location":"getting-started/examples/#3","title":"\u793a\u4f8b 3\uff1a\u5f02\u5e38\u5904\u7406","text":"<p>\u5c55\u793a\u5982\u4f55\u5728 FastAPI Amis \u4e2d\u5904\u7406\u5f02\u5e38\u3002</p>"},{"location":"getting-started/examples/#_11","title":"\u4ee3\u7801\u4f4d\u7f6e","text":"<p><code>example/exception_example.py</code></p>"},{"location":"getting-started/examples/#_12","title":"\u529f\u80fd\u5c55\u793a","text":"<ul> <li>\u2705 \u5168\u5c40\u5f02\u5e38\u5904\u7406</li> <li>\u2705 \u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762</li> <li>\u2705 \u9519\u8bef\u65e5\u5fd7\u8bb0\u5f55</li> <li>\u2705 \u7528\u6237\u53cb\u597d\u7684\u9519\u8bef\u63d0\u793a</li> </ul>"},{"location":"getting-started/examples/#_13","title":"\u6838\u5fc3\u4ee3\u7801","text":"<pre><code>from fastapi_amis.extensions.exception import AmisException\n\n@app.exception_handler(AmisException)\nasync def amis_exception_handler(request, exc):\n    return JSONResponse(\n        status_code=exc.status_code,\n        content={\"status\": 1, \"msg\": exc.message}\n    )\n</code></pre>"},{"location":"getting-started/examples/#4","title":"\u793a\u4f8b 4\uff1a\u65e5\u5fd7\u914d\u7f6e","text":"<p>\u5c55\u793a\u5982\u4f55\u914d\u7f6e\u548c\u4f7f\u7528\u65e5\u5fd7\u7cfb\u7edf\u3002</p>"},{"location":"getting-started/examples/#_14","title":"\u4ee3\u7801\u4f4d\u7f6e","text":"<p><code>example/logger_example.py</code></p>"},{"location":"getting-started/examples/#_15","title":"\u529f\u80fd\u5c55\u793a","text":"<ul> <li>\u2705 \u65e5\u5fd7\u914d\u7f6e</li> <li>\u2705 \u4e0d\u540c\u7ea7\u522b\u7684\u65e5\u5fd7</li> <li>\u2705 \u65e5\u5fd7\u6587\u4ef6\u8f93\u51fa</li> <li>\u2705 \u7ed3\u6784\u5316\u65e5\u5fd7</li> </ul>"},{"location":"getting-started/examples/#uvicorn","title":"\u4f7f\u7528 Uvicorn \u8fd0\u884c","text":"<p>\u6240\u6709\u793a\u4f8b\u90fd\u53ef\u4ee5\u4f7f\u7528 uvicorn \u8fd0\u884c\uff1a</p> <pre><code># \u8fd0\u884c simple_example.py\nuvicorn example.simple_example:create_app --factory --reload --port 4000\n\n# \u8fd0\u884c main.py\nuvicorn example.main:app --reload --port 3000\n</code></pre>"},{"location":"getting-started/examples/#_16","title":"\u5e38\u89c1\u7528\u4f8b","text":""},{"location":"getting-started/examples/#crud","title":"\u57fa\u7840 CRUD","text":"<p>\u6700\u5e38\u89c1\u7684\u7528\u4f8b\u662f\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u66f4\u65b0\u548c\u5220\u9664\u6570\u636e\uff1a</p> <pre><code>@router.register\nclass UserCRUDView(AmisView):\n    page_schema = \"\u7528\u6237\u7ba1\u7406\"\n    url = \"/users\"\n\n    page = Page(\n        title=\"\u7528\u6237\u7ba1\u7406\",\n        body={\n            \"type\": \"crud\",\n            \"api\": \"/api/users\",\n            \"columns\": [\n                {\"name\": \"id\", \"label\": \"ID\"},\n                {\"name\": \"name\", \"label\": \"\u59d3\u540d\"},\n            ]\n        }\n    )\n</code></pre>"},{"location":"getting-started/examples/#_17","title":"\u8868\u5355\u63d0\u4ea4","text":"<p>\u521b\u5efa\u8868\u5355\u9875\u9762\uff1a</p> <pre><code>@router.register\nclass UserFormView(AmisView):\n    page_schema = \"\u6dfb\u52a0\u7528\u6237\"\n    url = \"/users/new\"\n\n    page = Page(\n        title=\"\u6dfb\u52a0\u7528\u6237\",\n        body={\n            \"type\": \"form\",\n            \"api\": \"post:/api/users\",\n            \"body\": [\n                {\"type\": \"input-text\", \"name\": \"name\", \"label\": \"\u59d3\u540d\"},\n                {\"type\": \"input-email\", \"name\": \"email\", \"label\": \"\u90ae\u7bb1\"},\n            ]\n        }\n    )\n</code></pre>"},{"location":"getting-started/examples/#_18","title":"\u6570\u636e\u5c55\u793a","text":"<p>\u5c55\u793a\u7edf\u8ba1\u6570\u636e\uff1a</p> <pre><code>@router.register\nclass DashboardView(AmisView):\n    page_schema = \"\u4eea\u8868\u76d8\"\n    url = \"/dashboard\"\n\n    page = Page(\n        title=\"\u6570\u636e\u6982\u89c8\",\n        body=[\n            {\n                \"type\": \"cards\",\n                \"source\": \"/api/stats\",\n                \"card\": {\n                    \"body\": [\n                        {\"type\": \"tpl\", \"tpl\": \"${title}\"},\n                        {\"type\": \"tpl\", \"tpl\": \"${value}\"}\n                    ]\n                }\n            }\n        ]\n    )\n</code></pre>"},{"location":"getting-started/examples/#_19","title":"\u8fdb\u9636\u793a\u4f8b","text":""},{"location":"getting-started/examples/#_20","title":"\u81ea\u5b9a\u4e49\u7ec4\u4ef6","text":"<p>\u5982\u4f55\u521b\u5efa\u548c\u4f7f\u7528\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff1a</p> <pre><code>from fastapi_amis.amis.components import BaseComponent\n\nclass CustomCard(BaseComponent):\n    type: str = \"custom-card\"\n    title: str\n    content: str\n</code></pre>"},{"location":"getting-started/examples/#api","title":"API \u96c6\u6210","text":"<p>\u4e0e\u540e\u7aef API \u96c6\u6210\uff1a</p> <pre><code>@app.get(\"/api/users\")\nasync def get_users(page: int = 1, perPage: int = 10):\n    # \u4ece\u6570\u636e\u5e93\u83b7\u53d6\u6570\u636e\n    users = await db.get_users(page, perPage)\n    return {\n        \"status\": 0,\n        \"msg\": \"ok\",\n        \"data\": {\n            \"items\": users,\n            \"total\": await db.count_users()\n        }\n    }\n</code></pre>"},{"location":"getting-started/examples/#_21","title":"\u6743\u9650\u63a7\u5236","text":"<p>\u6dfb\u52a0\u6743\u9650\u9a8c\u8bc1\uff1a</p> <pre><code>from fastapi import Depends\nfrom fastapi_amis.core.views import AmisView\n\n@router.register\nclass AdminView(AmisView):\n    page_schema = \"\u7ba1\u7406\u5458\u9875\u9762\"\n    url = \"/admin\"\n    dependencies = [Depends(check_admin_permission)]\n\n    page = Page(...)\n</code></pre>"},{"location":"getting-started/examples/#_22","title":"\u5b8c\u6574\u9879\u76ee\u6a21\u677f","text":"<p>\u67e5\u770b\u6211\u4eec\u7684\u9879\u76ee\u6a21\u677f\u4ed3\u5e93\uff08\u5373\u5c06\u63a8\u51fa\uff09\uff0c\u83b7\u53d6\u751f\u4ea7\u5c31\u7eea\u7684\u9879\u76ee\u7ed3\u6784\u3002</p>"},{"location":"getting-started/examples/#_23","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u4e86\u89e3\u6838\u5fc3\u6982\u5ff5 - \u6df1\u5165\u7406\u89e3\u6846\u67b6\u539f\u7406</li> <li>Amis \u7ec4\u4ef6\u6587\u6863 - \u5b66\u4e60\u66f4\u591a UI \u7ec4\u4ef6</li> <li>API \u53c2\u8003 - \u67e5\u770b\u5b8c\u6574\u7684 API \u6587\u6863</li> </ul>"},{"location":"getting-started/examples/#_24","title":"\u83b7\u53d6\u5e2e\u52a9","text":"<p>\u5982\u679c\u5728\u8fd0\u884c\u793a\u4f8b\u65f6\u9047\u5230\u95ee\u9898\uff1a</p> <ol> <li>\u68c0\u67e5 Python \u7248\u672c\u662f\u5426 &gt;= 3.10</li> <li>\u786e\u4fdd\u6240\u6709\u4f9d\u8d56\u90fd\u5df2\u6b63\u786e\u5b89\u88c5</li> <li>\u67e5\u770b\u7ec8\u7aef\u7684\u9519\u8bef\u4fe1\u606f</li> <li>\u8bbf\u95ee GitHub Issues \u5bfb\u6c42\u5e2e\u52a9</li> </ol>"},{"location":"getting-started/first-app/","title":"\u7b2c\u4e00\u4e2a\u5e94\u7528","text":"<p>\u5728\u8fd9\u4e2a\u6559\u7a0b\u4e2d\uff0c\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u7ba1\u7406\u540e\u53f0\u5e94\u7528\uff0c\u5c55\u793a\u5982\u4f55\u4f7f\u7528 FastAPI Amis \u7684\u6838\u5fc3\u529f\u80fd\u3002</p>"},{"location":"getting-started/first-app/#_2","title":"\u521b\u5efa\u9879\u76ee","text":"<p>\u9996\u5148\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u9879\u76ee\u76ee\u5f55\uff1a</p> <pre><code>mkdir my-admin-app\ncd my-admin-app\n</code></pre>"},{"location":"getting-started/first-app/#_3","title":"\u521b\u5efa\u5e94\u7528\u6587\u4ef6","text":"<p>\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>app.py</code> \u7684\u6587\u4ef6\uff1a</p> <pre><code>from fastapi import FastAPI\nfrom fastapi_amis.core.router import AmisViewRouter\nfrom fastapi_amis.core.site import AmisSite\nfrom fastapi_amis.core.views import AmisView\nfrom fastapi_amis.amis.components import Page\n\n# \u521b\u5efa FastAPI \u5e94\u7528\napp = FastAPI(title=\"\u6211\u7684\u7ba1\u7406\u540e\u53f0\")\n\n# \u521b\u5efa\u7ad9\u70b9\nsite = AmisSite(\n    title=\"\u6211\u7684\u7ba1\u7406\u540e\u53f0\",\n    logo=\"https://baidu.gitee.io/amis/static/logo_408c434.png\"\n)\n\n# \u521b\u5efa\u7528\u6237\u7ba1\u7406\u8def\u7531\nuser_router = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\", type=\"page\")\n\n@user_router.register\nclass UserListView(AmisView):\n    \"\"\"\u7528\u6237\u5217\u8868\u9875\u9762\"\"\"\n    page_schema = \"\u7528\u6237\u5217\u8868\"\n    url = \"/users\"\n\n    page = Page(\n        title=\"\u7528\u6237\u7ba1\u7406\",\n        body=[\n            {\n                \"type\": \"crud\",\n                \"syncLocation\": False,\n                \"api\": \"/api/users\",\n                \"columns\": [\n                    {\"name\": \"id\", \"label\": \"ID\", \"type\": \"text\"},\n                    {\"name\": \"name\", \"label\": \"\u59d3\u540d\", \"type\": \"text\"},\n                    {\"name\": \"email\", \"label\": \"\u90ae\u7bb1\", \"type\": \"text\"},\n                    {\"name\": \"status\", \"label\": \"\u72b6\u6001\", \"type\": \"status\"},\n                ]\n            }\n        ]\n    )\n\n# \u521b\u5efa\u4eea\u8868\u76d8\u8def\u7531\ndashboard_router = AmisViewRouter(name=\"\u4eea\u8868\u76d8\", type=\"page\")\n\n@dashboard_router.register\nclass DashboardView(AmisView):\n    \"\"\"\u4eea\u8868\u76d8\u9875\u9762\"\"\"\n    page_schema = \"\u4eea\u8868\u76d8\"\n    url = \"/\"\n\n    page = Page(\n        title=\"\u6b22\u8fce\u4f7f\u7528\",\n        body=[\n            {\n                \"type\": \"panel\",\n                \"title\": \"\u7cfb\u7edf\u6982\u89c8\",\n                \"body\": \"\u8fd9\u662f\u4e00\u4e2a\u4f7f\u7528 FastAPI Amis \u6784\u5efa\u7684\u7ba1\u7406\u540e\u53f0\u7cfb\u7edf\"\n            },\n            {\n                \"type\": \"grid\",\n                \"columns\": [\n                    {\n                        \"body\": [\n                            {\n                                \"type\": \"panel\",\n                                \"title\": \"\u7528\u6237\u603b\u6570\",\n                                \"body\": {\n                                    \"type\": \"tpl\",\n                                    \"tpl\": '&lt;div style=\"font-size: 2em; text-align: center;\"&gt;1,234&lt;/div&gt;'\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        \"body\": [\n                            {\n                                \"type\": \"panel\",\n                                \"title\": \"\u4eca\u65e5\u8bbf\u95ee\",\n                                \"body\": {\n                                    \"type\": \"tpl\",\n                                    \"tpl\": '&lt;div style=\"font-size: 2em; text-align: center;\"&gt;567&lt;/div&gt;'\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        \"body\": [\n                            {\n                                \"type\": \"panel\",\n                                \"title\": \"\u6d3b\u8dc3\u7528\u6237\",\n                                \"body\": {\n                                    \"type\": \"tpl\",\n                                    \"tpl\": '&lt;div style=\"font-size: 2em; text-align: center;\"&gt;89&lt;/div&gt;'\n                                }\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n    )\n\n# \u6dfb\u52a0\u8def\u7531\u5230\u7ad9\u70b9\nsite.add_router(dashboard_router)\nsite.add_router(user_router)\n\n# \u6302\u8f7d\u5230 FastAPI \u5e94\u7528\nsite.mount_to_app(app)\n\n# \u6dfb\u52a0 API \u7aef\u70b9\uff08\u6a21\u62df\u6570\u636e\uff09\n@app.get(\"/api/users\")\nasync def get_users():\n    \"\"\"\u83b7\u53d6\u7528\u6237\u5217\u8868\"\"\"\n    return {\n        \"status\": 0,\n        \"msg\": \"ok\",\n        \"data\": {\n            \"items\": [\n                {\"id\": 1, \"name\": \"\u5f20\u4e09\", \"email\": \"zhangsan@example.com\", \"status\": 1},\n                {\"id\": 2, \"name\": \"\u674e\u56db\", \"email\": \"lisi@example.com\", \"status\": 1},\n                {\"id\": 3, \"name\": \"\u738b\u4e94\", \"email\": \"wangwu@example.com\", \"status\": 0},\n            ],\n            \"total\": 3\n        }\n    }\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre>"},{"location":"getting-started/first-app/#_4","title":"\u8fd0\u884c\u5e94\u7528","text":"<p>\u8fd0\u884c\u4f60\u7684\u7b2c\u4e00\u4e2a\u5e94\u7528\uff1a</p> <pre><code>python app.py\n</code></pre> <p>\u6216\u8005\u4f7f\u7528 uvicorn\uff1a</p> <pre><code>uvicorn app:app --reload --host 0.0.0.0 --port 8000\n</code></pre> <p>\u73b0\u5728\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee http://localhost:8000\uff0c\u4f60\u5c06\u770b\u5230\u4e00\u4e2a\u5b8c\u6574\u7684\u7ba1\u7406\u540e\u53f0\u754c\u9762\uff01</p>"},{"location":"getting-started/first-app/#_5","title":"\u4ee3\u7801\u89e3\u6790","text":"<p>\u8ba9\u6211\u4eec\u9010\u6b65\u5206\u6790\u4ee3\u7801\u7684\u5404\u4e2a\u90e8\u5206\uff1a</p>"},{"location":"getting-started/first-app/#1","title":"1. \u521b\u5efa\u7ad9\u70b9","text":"<pre><code>site = AmisSite(\n    title=\"\u6211\u7684\u7ba1\u7406\u540e\u53f0\",\n    logo=\"https://baidu.gitee.io/amis/static/logo_408c434.png\"\n)\n</code></pre> <p><code>AmisSite</code> \u662f\u6574\u4e2a\u7ba1\u7406\u540e\u53f0\u7684\u5bb9\u5668\uff0c\u8d1f\u8d23\u7ba1\u7406\u6240\u6709\u7684\u8def\u7531\u548c\u89c6\u56fe\u3002</p>"},{"location":"getting-started/first-app/#2","title":"2. \u521b\u5efa\u8def\u7531","text":"<pre><code>user_router = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\", type=\"page\")\n</code></pre> <p><code>AmisViewRouter</code> \u7528\u4e8e\u7ec4\u7ec7\u76f8\u5173\u7684\u89c6\u56fe\uff0c<code>name</code> \u53c2\u6570\u4f1a\u663e\u793a\u5728\u4fa7\u8fb9\u680f\u5bfc\u822a\u4e2d\u3002</p>"},{"location":"getting-started/first-app/#3","title":"3. \u6ce8\u518c\u89c6\u56fe","text":"<pre><code>@user_router.register\nclass UserListView(AmisView):\n    page_schema = \"\u7528\u6237\u5217\u8868\"\n    url = \"/users\"\n    page = Page(...)\n</code></pre> <p>\u4f7f\u7528\u88c5\u9970\u5668 <code>@user_router.register</code> \u5c06\u89c6\u56fe\u6ce8\u518c\u5230\u8def\u7531\u5668\u3002\u6bcf\u4e2a\u89c6\u56fe\u5b9a\u4e49\u4e00\u4e2a\u9875\u9762\uff1a</p> <ul> <li><code>page_schema</code>: \u9875\u9762\u7684\u63cf\u8ff0</li> <li><code>url</code>: \u9875\u9762\u7684\u8bbf\u95ee\u8def\u5f84</li> <li><code>page</code>: Amis \u9875\u9762\u7ec4\u4ef6</li> </ul>"},{"location":"getting-started/first-app/#4-api","title":"4. \u5b9a\u4e49 API \u7aef\u70b9","text":"<pre><code>@app.get(\"/api/users\")\nasync def get_users():\n    return {\n        \"status\": 0,\n        \"msg\": \"ok\",\n        \"data\": {...}\n    }\n</code></pre> <p>Amis \u7684 CRUD \u7ec4\u4ef6\u9700\u8981\u7b26\u5408\u7279\u5b9a\u683c\u5f0f\u7684 API \u54cd\u5e94\u3002</p>"},{"location":"getting-started/first-app/#_6","title":"\u9879\u76ee\u7ed3\u6784\u5efa\u8bae","text":"<p>\u968f\u7740\u9879\u76ee\u7684\u53d1\u5c55\uff0c\u5efa\u8bae\u91c7\u7528\u4ee5\u4e0b\u7ed3\u6784\uff1a</p> <pre><code>my-admin-app/\n\u251c\u2500\u2500 app.py              # \u4e3b\u5e94\u7528\u6587\u4ef6\n\u251c\u2500\u2500 models/             # \u6570\u636e\u6a21\u578b\n\u2502   \u2514\u2500\u2500 user.py\n\u251c\u2500\u2500 routers/            # \u8def\u7531\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2514\u2500\u2500 dashboard.py\n\u251c\u2500\u2500 views/              # \u89c6\u56fe\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2514\u2500\u2500 dashboard.py\n\u2514\u2500\u2500 requirements.txt    # \u4f9d\u8d56\u5217\u8868\n</code></pre>"},{"location":"getting-started/first-app/#_7","title":"\u4e0b\u4e00\u6b65","text":"<p>\u606d\u559c\uff01\u4f60\u5df2\u7ecf\u521b\u5efa\u4e86\u7b2c\u4e00\u4e2a FastAPI Amis \u5e94\u7528\u3002\u63a5\u4e0b\u6765\u4f60\u53ef\u4ee5\uff1a</p> <ul> <li>\u67e5\u770b\u66f4\u591a\u793a\u4f8b - \u5b66\u4e60\u66f4\u591a\u9ad8\u7ea7\u7528\u6cd5</li> <li>\u4e86\u89e3 Amis \u7ec4\u4ef6 - \u638c\u63e1\u4e30\u5bcc\u7684 UI \u7ec4\u4ef6</li> <li>\u5b66\u4e60\u89c6\u56fe\u548c\u8def\u7531 - \u6df1\u5165\u7406\u89e3\u6838\u5fc3\u6982\u5ff5</li> </ul>"},{"location":"getting-started/first-app/#_8","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"getting-started/first-app/#_9","title":"\u5982\u4f55\u4fee\u6539\u7aef\u53e3\uff1f","text":"<p>\u5728\u8fd0\u884c\u547d\u4ee4\u4e2d\u6307\u5b9a\u7aef\u53e3\uff1a</p> <pre><code>uvicorn app:app --port 3000\n</code></pre>"},{"location":"getting-started/first-app/#_10","title":"\u5982\u4f55\u542f\u7528\u70ed\u91cd\u8f7d\uff1f","text":"<p>\u4f7f\u7528 <code>--reload</code> \u53c2\u6570\uff1a</p> <pre><code>uvicorn app:app --reload\n</code></pre>"},{"location":"getting-started/first-app/#api","title":"API \u54cd\u5e94\u683c\u5f0f\u8981\u6c42","text":"<p>Amis \u8981\u6c42 API \u8fd4\u56de\u7279\u5b9a\u683c\u5f0f\uff1a</p> <pre><code>{\n  \"status\": 0,        // 0 \u8868\u793a\u6210\u529f\n  \"msg\": \"ok\",        // \u6d88\u606f\n  \"data\": {           // \u6570\u636e\n    \"items\": [...],   // \u5217\u8868\u6570\u636e\n    \"total\": 100      // \u603b\u6570\n  }\n}\n</code></pre>"},{"location":"getting-started/installation/","title":"\u5b89\u88c5","text":"<p>\u672c\u6307\u5357\u5c06\u5e2e\u52a9\u4f60\u5728\u672c\u5730\u73af\u5883\u4e2d\u5b89\u88c5\u548c\u914d\u7f6e FastAPI Amis\u3002</p>"},{"location":"getting-started/installation/#_2","title":"\u73af\u5883\u8981\u6c42","text":"<p>\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u4f60\u7684\u7cfb\u7edf\u6ee1\u8db3\u4ee5\u4e0b\u8981\u6c42\uff1a</p> <ul> <li>Python: 3.10 \u6216\u66f4\u9ad8\u7248\u672c</li> <li>\u64cd\u4f5c\u7cfb\u7edf: Windows, macOS, \u6216 Linux</li> </ul>"},{"location":"getting-started/installation/#pip","title":"\u4f7f\u7528 pip \u5b89\u88c5","text":""},{"location":"getting-started/installation/#1","title":"1. \u5b89\u88c5\u7a33\u5b9a\u7248\u672c","text":"<p>\u4ece PyPI \u5b89\u88c5\u6700\u65b0\u7a33\u5b9a\u7248\u672c\uff1a</p> <pre><code>pip install fastapi-amis\n</code></pre>"},{"location":"getting-started/installation/#2","title":"2. \u5b89\u88c5\u5f00\u53d1\u4f9d\u8d56","text":"<p>\u5982\u679c\u4f60\u9700\u8981\u5f00\u53d1\u6216\u8fd0\u884c\u793a\u4f8b\uff0c\u8bf7\u5b89\u88c5\u5f00\u53d1\u4f9d\u8d56\uff1a</p> <pre><code>pip install fastapi-amis[dev]\n</code></pre> <p>\u8fd9\u5c06\u5b89\u88c5\u4ee5\u4e0b\u989d\u5916\u7684\u5305\uff1a</p> <ul> <li>fastapi[standard] - FastAPI \u53ca\u5176\u6807\u51c6\u4f9d\u8d56</li> <li>uvicorn - ASGI \u670d\u52a1\u5668</li> <li>httpx - HTTP \u5ba2\u6237\u7aef</li> <li>pytest - \u6d4b\u8bd5\u6846\u67b6</li> <li>\u4ee5\u53ca\u5176\u4ed6\u5f00\u53d1\u5de5\u5177</li> </ul>"},{"location":"getting-started/installation/#uv","title":"\u4f7f\u7528 uv \u5b89\u88c5\uff08\u63a8\u8350\uff09","text":"<p>uv \u662f\u4e00\u4e2a\u5feb\u901f\u7684 Python \u5305\u7ba1\u7406\u5668\u548c\u9879\u76ee\u7ba1\u7406\u5de5\u5177\u3002</p>"},{"location":"getting-started/installation/#1-uv","title":"1. \u5b89\u88c5 uv","text":"Linux/macOSWindows <pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre> <pre><code>powershell -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n</code></pre>"},{"location":"getting-started/installation/#2-fastapi-amis","title":"2. \u5b89\u88c5 FastAPI Amis","text":"<pre><code>uv pip install fastapi-amis\n</code></pre>"},{"location":"getting-started/installation/#3","title":"3. \u5b89\u88c5\u5f00\u53d1\u4f9d\u8d56","text":"<pre><code>uv pip install fastapi-amis[dev]\n</code></pre>"},{"location":"getting-started/installation/#_3","title":"\u4ece\u6e90\u7801\u5b89\u88c5","text":"<p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u6700\u65b0\u7684\u5f00\u53d1\u7248\u672c\u6216\u53c2\u4e0e\u9879\u76ee\u5f00\u53d1\uff1a</p>"},{"location":"getting-started/installation/#1_1","title":"1. \u514b\u9686\u4ed3\u5e93","text":"<pre><code>git clone https://github.com/InfernalAzazel/fastapi-amis.git\ncd fastapi-amis\n</code></pre>"},{"location":"getting-started/installation/#2-uv","title":"2. \u4f7f\u7528 uv \u5b89\u88c5","text":"<pre><code># \u5b89\u88c5 uv\uff08\u5982\u679c\u5c1a\u672a\u5b89\u88c5\uff09\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# \u540c\u6b65\u4f9d\u8d56\uff08\u5305\u62ec\u5f00\u53d1\u4f9d\u8d56\uff09\nuv sync\n\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nsource .venv/bin/activate  # Linux/macOS\n# \u6216\n.venv\\Scripts\\activate  # Windows\n</code></pre>"},{"location":"getting-started/installation/#3-pip","title":"3. \u4f7f\u7528 pip \u5b89\u88c5","text":"<pre><code># \u521b\u5efa\u865a\u62df\u73af\u5883\npython -m venv .venv\n\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nsource .venv/bin/activate  # Linux/macOS\n# \u6216\n.venv\\Scripts\\activate  # Windows\n\n# \u5b89\u88c5\u4f9d\u8d56\npip install -e \".[dev]\"\n</code></pre>"},{"location":"getting-started/installation/#_4","title":"\u9a8c\u8bc1\u5b89\u88c5","text":"<p>\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u9a8c\u8bc1 FastAPI Amis \u662f\u5426\u6b63\u786e\u5b89\u88c5\uff1a</p> <pre><code>import fastapi_amis\nprint(fastapi_amis.__version__)\n</code></pre> <p>\u6216\u8005\u5728\u547d\u4ee4\u884c\u4e2d\uff1a</p> <pre><code>python -c \"import fastapi_amis; print(fastapi_amis.__version__)\"\n</code></pre>"},{"location":"getting-started/installation/#_5","title":"\u8fd0\u884c\u793a\u4f8b","text":"<p>\u514b\u9686\u4ed3\u5e93\u540e\uff0c\u4f60\u53ef\u4ee5\u8fd0\u884c\u793a\u4f8b\u9879\u76ee\uff1a</p>"},{"location":"getting-started/installation/#_6","title":"\u7b80\u5355\u793a\u4f8b","text":"<pre><code>cd example\nuv run python simple_example.py\n# \u6216\u4f7f\u7528 python\npython simple_example.py\n</code></pre> <p>\u8bbf\u95ee http://localhost:4000</p>"},{"location":"getting-started/installation/#_7","title":"\u591a\u9875\u9762\u793a\u4f8b","text":"<pre><code>cd example\nuv run python main.py\n# \u6216\u4f7f\u7528 python\npython main.py\n</code></pre> <p>\u8bbf\u95ee http://localhost:3000</p>"},{"location":"getting-started/installation/#_8","title":"\u53ef\u9009\u4f9d\u8d56","text":"<p>FastAPI Amis \u652f\u6301\u4ee5\u4e0b\u53ef\u9009\u4f9d\u8d56\uff1a</p> <ul> <li><code>dev</code> - \u5f00\u53d1\u5de5\u5177\u548c\u6d4b\u8bd5\u6846\u67b6</li> <li>\u672a\u6765\u53ef\u80fd\u6dfb\u52a0\u66f4\u591a\u53ef\u9009\u4f9d\u8d56\uff08\u5982\u6570\u636e\u5e93\u9a71\u52a8\u7b49\uff09</li> </ul> <p>\u5b89\u88c5\u53ef\u9009\u4f9d\u8d56\uff1a</p> <pre><code># \u4f7f\u7528 pip\npip install fastapi-amis[dev]\n\n# \u4f7f\u7528 uv\nuv pip install fastapi-amis[dev]\n</code></pre>"},{"location":"getting-started/installation/#_9","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"getting-started/installation/#python","title":"Python \u7248\u672c\u4e0d\u5339\u914d","text":"<p>\u5982\u679c\u9047\u5230 Python \u7248\u672c\u95ee\u9898\uff0c\u8bf7\u786e\u4fdd\u4f60\u7684 Python \u7248\u672c\u81f3\u5c11\u662f 3.10\uff1a</p> <pre><code>python --version\n</code></pre>"},{"location":"getting-started/installation/#_10","title":"\u6743\u9650\u9519\u8bef","text":"<p>\u5982\u679c\u5728\u5b89\u88c5\u65f6\u9047\u5230\u6743\u9650\u9519\u8bef\uff0c\u53ef\u4ee5\u5c1d\u8bd5\uff1a</p> <pre><code>pip install --user fastapi-amis\n</code></pre>"},{"location":"getting-started/installation/#_11","title":"\u865a\u62df\u73af\u5883","text":"<p>\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u5728\u865a\u62df\u73af\u5883\u4e2d\u5b89\u88c5 FastAPI Amis\uff1a</p> <pre><code>python -m venv .venv\nsource .venv/bin/activate  # Linux/macOS\npip install fastapi-amis\n</code></pre>"},{"location":"getting-started/installation/#_12","title":"\u4e0b\u4e00\u6b65","text":"<p>\u73b0\u5728\u4f60\u5df2\u7ecf\u5b89\u88c5\u4e86 FastAPI Amis\uff0c\u53ef\u4ee5\u7ee7\u7eed\uff1a</p> <ul> <li>\u521b\u5efa\u7b2c\u4e00\u4e2a\u5e94\u7528</li> <li>\u67e5\u770b\u793a\u4f8b\u9879\u76ee</li> <li>\u4e86\u89e3\u6838\u5fc3\u6982\u5ff5</li> </ul>"},{"location":"guide/amis-components/","title":"Amis \u7ec4\u4ef6","text":"<p>Amis \u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684 UI \u7ec4\u4ef6\uff0cFastAPI Amis \u5bf9\u5176\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4f7f\u5176\u66f4\u6613\u4e8e\u5728 Python \u4e2d\u4f7f\u7528\u3002</p>"},{"location":"guide/amis-components/#_1","title":"\u57fa\u7840\u7ec4\u4ef6","text":""},{"location":"guide/amis-components/#page-","title":"Page - \u9875\u9762","text":"<p>\u9875\u9762\u662f\u6700\u9876\u5c42\u7684\u5bb9\u5668\u7ec4\u4ef6\uff1a</p> <pre><code>from fastapi_amis.amis.components import Page\n\npage = Page(\n    title=\"\u9875\u9762\u6807\u9898\",\n    subTitle=\"\u526f\u6807\u9898\",\n    body=[\n        # \u9875\u9762\u5185\u5bb9\n    ]\n)\n</code></pre> <p>\u5e38\u7528\u5c5e\u6027\uff1a</p> <ul> <li><code>title</code>: \u9875\u9762\u6807\u9898</li> <li><code>subTitle</code>: \u9875\u9762\u526f\u6807\u9898  </li> <li><code>body</code>: \u9875\u9762\u5185\u5bb9\uff08\u7ec4\u4ef6\u6216\u7ec4\u4ef6\u5217\u8868\uff09</li> <li><code>toolbar</code>: \u5de5\u5177\u680f\u914d\u7f6e</li> <li><code>aside</code>: \u4fa7\u8fb9\u680f\u914d\u7f6e</li> </ul>"},{"location":"guide/amis-components/#_2","title":"\u8868\u5355\u7ec4\u4ef6","text":""},{"location":"guide/amis-components/#form-","title":"Form - \u8868\u5355","text":"<p>\u7528\u4e8e\u6570\u636e\u8f93\u5165\u548c\u63d0\u4ea4\uff1a</p> <pre><code>{\n    \"type\": \"form\",\n    \"api\": \"post:/api/users\",\n    \"title\": \"\u7528\u6237\u8868\u5355\",\n    \"body\": [\n        {\n            \"type\": \"input-text\",\n            \"name\": \"name\",\n            \"label\": \"\u59d3\u540d\",\n            \"required\": True,\n            \"placeholder\": \"\u8bf7\u8f93\u5165\u59d3\u540d\"\n        },\n        {\n            \"type\": \"input-email\",\n            \"name\": \"email\",\n            \"label\": \"\u90ae\u7bb1\",\n            \"required\": True\n        },\n        {\n            \"type\": \"input-password\",\n            \"name\": \"password\",\n            \"label\": \"\u5bc6\u7801\",\n            \"required\": True\n        }\n    ]\n}\n</code></pre>"},{"location":"guide/amis-components/#_3","title":"\u5e38\u7528\u8868\u5355\u5b57\u6bb5","text":""},{"location":"guide/amis-components/#_4","title":"\u6587\u672c\u8f93\u5165","text":"<pre><code>{\n    \"type\": \"input-text\",\n    \"name\": \"username\",\n    \"label\": \"\u7528\u6237\u540d\",\n    \"required\": True,\n    \"minLength\": 3,\n    \"maxLength\": 20,\n    \"placeholder\": \"\u8bf7\u8f93\u5165\u7528\u6237\u540d\"\n}\n</code></pre>"},{"location":"guide/amis-components/#_5","title":"\u6570\u5b57\u8f93\u5165","text":"<pre><code>{\n    \"type\": \"input-number\",\n    \"name\": \"age\",\n    \"label\": \"\u5e74\u9f84\",\n    \"min\": 0,\n    \"max\": 150\n}\n</code></pre>"},{"location":"guide/amis-components/#_6","title":"\u9009\u62e9\u5668","text":"<pre><code>{\n    \"type\": \"select\",\n    \"name\": \"role\",\n    \"label\": \"\u89d2\u8272\",\n    \"options\": [\n        {\"label\": \"\u7ba1\u7406\u5458\", \"value\": \"admin\"},\n        {\"label\": \"\u666e\u901a\u7528\u6237\", \"value\": \"user\"}\n    ]\n}\n</code></pre>"},{"location":"guide/amis-components/#_7","title":"\u65e5\u671f\u9009\u62e9","text":"<pre><code>{\n    \"type\": \"input-date\",\n    \"name\": \"birthday\",\n    \"label\": \"\u751f\u65e5\",\n    \"format\": \"YYYY-MM-DD\"\n}\n</code></pre>"},{"location":"guide/amis-components/#_8","title":"\u6587\u4ef6\u4e0a\u4f20","text":"<pre><code>{\n    \"type\": \"input-file\",\n    \"name\": \"avatar\",\n    \"label\": \"\u5934\u50cf\",\n    \"accept\": \"image/*\",\n    \"maxSize\": 1024 * 1024 * 2,  # 2MB\n    \"receiver\": \"/api/upload\"\n}\n</code></pre>"},{"location":"guide/amis-components/#_9","title":"\u5c55\u793a\u7ec4\u4ef6","text":""},{"location":"guide/amis-components/#crud-","title":"CRUD - \u589e\u5220\u6539\u67e5","text":"<p>\u6700\u5e38\u7528\u7684\u6570\u636e\u8868\u683c\u7ec4\u4ef6\uff1a</p> <pre><code>{\n    \"type\": \"crud\",\n    \"syncLocation\": False,\n    \"api\": \"/api/users\",\n    \"columns\": [\n        {\"name\": \"id\", \"label\": \"ID\", \"type\": \"text\"},\n        {\"name\": \"name\", \"label\": \"\u59d3\u540d\", \"type\": \"text\"},\n        {\"name\": \"email\", \"label\": \"\u90ae\u7bb1\", \"type\": \"text\"},\n        {\n            \"name\": \"status\",\n            \"label\": \"\u72b6\u6001\",\n            \"type\": \"status\",\n            \"map\": {\n                \"1\": {\"label\": \"\u6b63\u5e38\", \"status\": \"success\"},\n                \"0\": {\"label\": \"\u7981\u7528\", \"status\": \"danger\"}\n            }\n        },\n        {\n            \"type\": \"operation\",\n            \"label\": \"\u64cd\u4f5c\",\n            \"buttons\": [\n                {\n                    \"label\": \"\u7f16\u8f91\",\n                    \"type\": \"button\",\n                    \"actionType\": \"dialog\",\n                    \"dialog\": {\n                        \"title\": \"\u7f16\u8f91\u7528\u6237\",\n                        \"body\": {\n                            \"type\": \"form\",\n                            \"api\": \"put:/api/users/${id}\",\n                            \"body\": [...]\n                        }\n                    }\n                },\n                {\n                    \"label\": \"\u5220\u9664\",\n                    \"type\": \"button\",\n                    \"actionType\": \"ajax\",\n                    \"api\": \"delete:/api/users/${id}\",\n                    \"confirmText\": \"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f\"\n                }\n            ]\n        }\n    ],\n    \"headerToolbar\": [\n        \"bulkActions\",\n        {\n            \"type\": \"button\",\n            \"label\": \"\u65b0\u589e\",\n            \"actionType\": \"dialog\",\n            \"level\": \"primary\",\n            \"dialog\": {\n                \"title\": \"\u6dfb\u52a0\u7528\u6237\",\n                \"body\": {\n                    \"type\": \"form\",\n                    \"api\": \"post:/api/users\",\n                    \"body\": [...]\n                }\n            }\n        }\n    ],\n    \"footerToolbar\": [\"statistics\", \"pagination\"]\n}\n</code></pre>"},{"location":"guide/amis-components/#table-","title":"Table - \u7b80\u5355\u8868\u683c","text":"<p>\u4e0d\u5e26\u589e\u5220\u6539\u67e5\u529f\u80fd\u7684\u8868\u683c\uff1a</p> <pre><code>{\n    \"type\": \"table\",\n    \"data\": {\n        \"items\": [\n            {\"name\": \"\u5f20\u4e09\", \"age\": 25},\n            {\"name\": \"\u674e\u56db\", \"age\": 30}\n        ]\n    },\n    \"columns\": [\n        {\"name\": \"name\", \"label\": \"\u59d3\u540d\"},\n        {\"name\": \"age\", \"label\": \"\u5e74\u9f84\"}\n    ]\n}\n</code></pre>"},{"location":"guide/amis-components/#cards-","title":"Cards - \u5361\u7247\u5217\u8868","text":"<p>\u4ee5\u5361\u7247\u5f62\u5f0f\u5c55\u793a\u6570\u636e\uff1a</p> <pre><code>{\n    \"type\": \"cards\",\n    \"source\": \"/api/products\",\n    \"card\": {\n        \"header\": {\n            \"title\": \"${name}\",\n            \"subTitle\": \"${category}\"\n        },\n        \"body\": [\n            {\n                \"type\": \"image\",\n                \"src\": \"${image}\",\n                \"className\": \"thumb-lg\"\n            },\n            {\n                \"type\": \"tpl\",\n                \"tpl\": '&lt;div&gt;\u4ef7\u683c\uff1a\u00a5${price}&lt;/div&gt;'\n            }\n        ],\n        \"actions\": [\n            {\n                \"type\": \"button\",\n                \"label\": \"\u8be6\u60c5\",\n                \"actionType\": \"link\",\n                \"link\": \"/products/${id}\"\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"guide/amis-components/#_10","title":"\u5e03\u5c40\u7ec4\u4ef6","text":""},{"location":"guide/amis-components/#grid-","title":"Grid - \u7f51\u683c\u5e03\u5c40","text":"<p>\u521b\u5efa\u54cd\u5e94\u5f0f\u7f51\u683c\u5e03\u5c40\uff1a</p> <pre><code>{\n    \"type\": \"grid\",\n    \"columns\": [\n        {\n            \"md\": 4,\n            \"body\": [\n                {\n                    \"type\": \"panel\",\n                    \"title\": \"\u7edf\u8ba11\",\n                    \"body\": \"\u5185\u5bb91\"\n                }\n            ]\n        },\n        {\n            \"md\": 4,\n            \"body\": [\n                {\n                    \"type\": \"panel\",\n                    \"title\": \"\u7edf\u8ba12\",\n                    \"body\": \"\u5185\u5bb92\"\n                }\n            ]\n        },\n        {\n            \"md\": 4,\n            \"body\": [\n                {\n                    \"type\": \"panel\",\n                    \"title\": \"\u7edf\u8ba13\",\n                    \"body\": \"\u5185\u5bb93\"\n                }\n            ]\n        }\n    ]\n}\n</code></pre>"},{"location":"guide/amis-components/#panel-","title":"Panel - \u9762\u677f","text":"<p>\u5e26\u6807\u9898\u7684\u5bb9\u5668\u7ec4\u4ef6\uff1a</p> <pre><code>{\n    \"type\": \"panel\",\n    \"title\": \"\u9762\u677f\u6807\u9898\",\n    \"body\": \"\u9762\u677f\u5185\u5bb9\",\n    \"actions\": [\n        {\n            \"type\": \"button\",\n            \"label\": \"\u64cd\u4f5c\u6309\u94ae\"\n        }\n    ]\n}\n</code></pre>"},{"location":"guide/amis-components/#tabs-","title":"Tabs - \u6807\u7b7e\u9875","text":"<p>\u521b\u5efa\u6807\u7b7e\u9875\u5e03\u5c40\uff1a</p> <pre><code>{\n    \"type\": \"tabs\",\n    \"tabs\": [\n        {\n            \"title\": \"\u6807\u7b7e1\",\n            \"body\": \"\u5185\u5bb91\"\n        },\n        {\n            \"title\": \"\u6807\u7b7e2\",\n            \"body\": \"\u5185\u5bb92\"\n        }\n    ]\n}\n</code></pre>"},{"location":"guide/amis-components/#_11","title":"\u4ea4\u4e92\u7ec4\u4ef6","text":""},{"location":"guide/amis-components/#dialog-","title":"Dialog - \u5bf9\u8bdd\u6846","text":"<p>\u5f39\u51fa\u5bf9\u8bdd\u6846\uff1a</p> <pre><code>{\n    \"type\": \"button\",\n    \"label\": \"\u6253\u5f00\u5bf9\u8bdd\u6846\",\n    \"actionType\": \"dialog\",\n    \"dialog\": {\n        \"title\": \"\u5bf9\u8bdd\u6846\u6807\u9898\",\n        \"body\": \"\u5bf9\u8bdd\u6846\u5185\u5bb9\",\n        \"actions\": [\n            {\n                \"type\": \"button\",\n                \"label\": \"\u786e\u5b9a\",\n                \"actionType\": \"confirm\"\n            },\n            {\n                \"type\": \"button\",\n                \"label\": \"\u53d6\u6d88\",\n                \"actionType\": \"cancel\"\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"guide/amis-components/#drawer-","title":"Drawer - \u62bd\u5c49","text":"<p>\u4ece\u4fa7\u8fb9\u6ed1\u51fa\u7684\u9762\u677f\uff1a</p> <pre><code>{\n    \"type\": \"button\",\n    \"label\": \"\u6253\u5f00\u62bd\u5c49\",\n    \"actionType\": \"drawer\",\n    \"drawer\": {\n        \"title\": \"\u62bd\u5c49\u6807\u9898\",\n        \"body\": \"\u62bd\u5c49\u5185\u5bb9\"\n    }\n}\n</code></pre>"},{"location":"guide/amis-components/#_12","title":"\u6570\u636e\u53ef\u89c6\u5316","text":""},{"location":"guide/amis-components/#chart-","title":"Chart - \u56fe\u8868","text":"<p>\u57fa\u4e8e ECharts \u7684\u56fe\u8868\u7ec4\u4ef6\uff1a</p> <pre><code>{\n    \"type\": \"chart\",\n    \"api\": \"/api/stats/chart\",\n    \"config\": {\n        \"title\": {\n            \"text\": \"\u9500\u552e\u7edf\u8ba1\"\n        },\n        \"tooltip\": {},\n        \"xAxis\": {\n            \"type\": \"category\",\n            \"data\": [\"\u4e00\u6708\", \"\u4e8c\u6708\", \"\u4e09\u6708\", \"\u56db\u6708\", \"\u4e94\u6708\", \"\u516d\u6708\"]\n        },\n        \"yAxis\": {\n            \"type\": \"value\"\n        },\n        \"series\": [\n            {\n                \"name\": \"\u9500\u552e\u989d\",\n                \"type\": \"line\",\n                \"data\": [820, 932, 901, 934, 1290, 1330]\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"guide/amis-components/#_13","title":"\u7279\u6b8a\u7ec4\u4ef6","text":""},{"location":"guide/amis-components/#service-","title":"Service - \u6570\u636e\u670d\u52a1","text":"<p>\u7528\u4e8e\u83b7\u53d6\u6570\u636e\u5e76\u6e32\u67d3\uff1a</p> <pre><code>{\n    \"type\": \"service\",\n    \"api\": \"/api/user/profile\",\n    \"body\": [\n        {\n            \"type\": \"panel\",\n            \"title\": \"\u4e2a\u4eba\u4fe1\u606f\",\n            \"body\": [\n                {\"type\": \"static\", \"label\": \"\u59d3\u540d\", \"name\": \"name\"},\n                {\"type\": \"static\", \"label\": \"\u90ae\u7bb1\", \"name\": \"email\"}\n            ]\n        }\n    ]\n}\n</code></pre>"},{"location":"guide/amis-components/#wizard-","title":"Wizard - \u5411\u5bfc","text":"<p>\u591a\u6b65\u9aa4\u8868\u5355\uff1a</p> <pre><code>{\n    \"type\": \"wizard\",\n    \"api\": \"post:/api/wizard\",\n    \"steps\": [\n        {\n            \"title\": \"\u7b2c\u4e00\u6b65\",\n            \"body\": [\n                {\"type\": \"input-text\", \"name\": \"name\", \"label\": \"\u59d3\u540d\"}\n            ]\n        },\n        {\n            \"title\": \"\u7b2c\u4e8c\u6b65\",\n            \"body\": [\n                {\"type\": \"input-email\", \"name\": \"email\", \"label\": \"\u90ae\u7bb1\"}\n            ]\n        },\n        {\n            \"title\": \"\u5b8c\u6210\",\n            \"body\": \"\u63d0\u4ea4\u6210\u529f\uff01\"\n        }\n    ]\n}\n</code></pre>"},{"location":"guide/amis-components/#_14","title":"\u7ec4\u4ef6\u7ec4\u5408\u793a\u4f8b","text":""},{"location":"guide/amis-components/#_15","title":"\u5b8c\u6574\u7684\u7528\u6237\u7ba1\u7406\u9875\u9762","text":"<pre><code>Page(\n    title=\"\u7528\u6237\u7ba1\u7406\",\n    body=[\n        {\n            \"type\": \"crud\",\n            \"api\": \"/api/users\",\n            \"filter\": {\n                \"title\": \"\u641c\u7d22\",\n                \"body\": [\n                    {\n                        \"type\": \"input-text\",\n                        \"name\": \"keywords\",\n                        \"placeholder\": \"\u641c\u7d22\u59d3\u540d\u6216\u90ae\u7bb1\"\n                    },\n                    {\n                        \"type\": \"select\",\n                        \"name\": \"status\",\n                        \"label\": \"\u72b6\u6001\",\n                        \"options\": [\n                            {\"label\": \"\u5168\u90e8\", \"value\": \"\"},\n                            {\"label\": \"\u6b63\u5e38\", \"value\": \"1\"},\n                            {\"label\": \"\u7981\u7528\", \"value\": \"0\"}\n                        ]\n                    }\n                ]\n            },\n            \"columns\": [\n                {\"name\": \"id\", \"label\": \"ID\", \"sortable\": True},\n                {\"name\": \"name\", \"label\": \"\u59d3\u540d\", \"searchable\": True},\n                {\"name\": \"email\", \"label\": \"\u90ae\u7bb1\"},\n                {\n                    \"name\": \"status\",\n                    \"label\": \"\u72b6\u6001\",\n                    \"type\": \"mapping\",\n                    \"map\": {\n                        \"1\": \"&lt;span class='label label-success'&gt;\u6b63\u5e38&lt;/span&gt;\",\n                        \"0\": \"&lt;span class='label label-danger'&gt;\u7981\u7528&lt;/span&gt;\"\n                    }\n                },\n                {\n                    \"name\": \"created_at\",\n                    \"label\": \"\u521b\u5efa\u65f6\u95f4\",\n                    \"type\": \"date\",\n                    \"format\": \"YYYY-MM-DD HH:mm:ss\"\n                },\n                {\n                    \"type\": \"operation\",\n                    \"label\": \"\u64cd\u4f5c\",\n                    \"buttons\": [\n                        {\n                            \"label\": \"\u7f16\u8f91\",\n                            \"type\": \"button\",\n                            \"level\": \"link\",\n                            \"actionType\": \"drawer\",\n                            \"drawer\": {\n                                \"title\": \"\u7f16\u8f91\u7528\u6237\",\n                                \"body\": {\n                                    \"type\": \"form\",\n                                    \"initApi\": \"/api/users/${id}\",\n                                    \"api\": \"put:/api/users/${id}\",\n                                    \"body\": [\n                                        {\n                                            \"type\": \"input-text\",\n                                            \"name\": \"name\",\n                                            \"label\": \"\u59d3\u540d\",\n                                            \"required\": True\n                                        },\n                                        {\n                                            \"type\": \"input-email\",\n                                            \"name\": \"email\",\n                                            \"label\": \"\u90ae\u7bb1\",\n                                            \"required\": True\n                                        },\n                                        {\n                                            \"type\": \"switch\",\n                                            \"name\": \"status\",\n                                            \"label\": \"\u72b6\u6001\",\n                                            \"trueValue\": 1,\n                                            \"falseValue\": 0\n                                        }\n                                    ]\n                                }\n                            }\n                        },\n                        {\n                            \"label\": \"\u5220\u9664\",\n                            \"type\": \"button\",\n                            \"level\": \"link\",\n                            \"className\": \"text-danger\",\n                            \"actionType\": \"ajax\",\n                            \"api\": \"delete:/api/users/${id}\",\n                            \"confirmText\": \"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u7528\u6237\u5417\uff1f\"\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n)\n</code></pre>"},{"location":"guide/amis-components/#_16","title":"\u66f4\u591a\u8d44\u6e90","text":"<ul> <li>Amis \u5b98\u65b9\u6587\u6863 - \u5b8c\u6574\u7684\u7ec4\u4ef6\u6587\u6863\u548c\u793a\u4f8b</li> <li>Amis \u53ef\u89c6\u5316\u7f16\u8f91\u5668 - \u5728\u7ebf\u7f16\u8f91\u5668</li> <li>\u793a\u4f8b\u9879\u76ee - \u67e5\u770b\u66f4\u591a\u5b9e\u9645\u5e94\u7528\u793a\u4f8b</li> </ul>"},{"location":"guide/amis-components/#_17","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u7ad9\u70b9\u914d\u7f6e - \u914d\u7f6e\u7ad9\u70b9\u5916\u89c2</li> <li>\u6700\u4f73\u5b9e\u8df5 - \u5f00\u53d1\u5efa\u8bae</li> </ul>"},{"location":"guide/concepts/","title":"\u6838\u5fc3\u6982\u5ff5","text":"<p>\u7406\u89e3 FastAPI Amis \u7684\u6838\u5fc3\u6982\u5ff5\u5c06\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u4f7f\u7528\u8fd9\u4e2a\u6846\u67b6\u3002</p>"},{"location":"guide/concepts/#_2","title":"\u67b6\u6784\u6982\u89c8","text":"<p>FastAPI Amis \u91c7\u7528\u5206\u5c42\u67b6\u6784\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          \u524d\u7aef (Amis UI)             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502      FastAPI Amis \u6846\u67b6\u5c42            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  Site   \u2502  Router  \u2502   View   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502        FastAPI \u6838\u5fc3\u6846\u67b6             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guide/concepts/#_3","title":"\u6838\u5fc3\u7ec4\u4ef6","text":""},{"location":"guide/concepts/#amissite-","title":"AmisSite - \u7ad9\u70b9","text":"<p><code>AmisSite</code> \u662f\u6574\u4e2a\u5e94\u7528\u7684\u5bb9\u5668\uff0c\u8d1f\u8d23\uff1a</p> <ul> <li>\u7ba1\u7406\u6240\u6709\u8def\u7531\u5668</li> <li>\u914d\u7f6e\u5168\u5c40\u8bbe\u7f6e\uff08\u6807\u9898\u3001Logo \u7b49\uff09</li> <li>\u751f\u6210\u4fa7\u8fb9\u680f\u5bfc\u822a</li> <li>\u6302\u8f7d\u5230 FastAPI \u5e94\u7528</li> </ul> <pre><code>from fastapi_amis.core.site import AmisSite\n\nsite = AmisSite(\n    title=\"\u6211\u7684\u7ba1\u7406\u540e\u53f0\",\n    logo=\"https://example.com/logo.png\"\n)\n</code></pre> <p>\u4e3b\u8981\u65b9\u6cd5\uff1a</p> <ul> <li><code>add_router(router)</code> - \u6dfb\u52a0\u8def\u7531\u5668</li> <li><code>mount_to_app(app, prefix=\"/\")</code> - \u6302\u8f7d\u5230 FastAPI \u5e94\u7528</li> </ul>"},{"location":"guide/concepts/#amisviewrouter-","title":"AmisViewRouter - \u8def\u7531\u5668","text":"<p><code>AmisViewRouter</code> \u7528\u4e8e\u7ec4\u7ec7\u76f8\u5173\u7684\u89c6\u56fe\uff0c\u4e00\u4e2a\u8def\u7531\u5668\u901a\u5e38\u5bf9\u5e94\u4fa7\u8fb9\u680f\u7684\u4e00\u4e2a\u5bfc\u822a\u9879\u3002</p> <pre><code>from fastapi_amis.core.router import AmisViewRouter\n\nuser_router = AmisViewRouter(\n    name=\"\u7528\u6237\u7ba1\u7406\",  # \u5bfc\u822a\u663e\u793a\u540d\u79f0\n    type=\"page\"       # \u8def\u7531\u7c7b\u578b\n)\n</code></pre> <p>\u6ce8\u518c\u89c6\u56fe\uff1a</p> <pre><code>@user_router.register\nclass UserListView(AmisView):\n    ...\n</code></pre>"},{"location":"guide/concepts/#amisview-","title":"AmisView - \u89c6\u56fe","text":"<p><code>AmisView</code> \u662f\u9875\u9762\u7684\u57fa\u7c7b\uff0c\u6bcf\u4e2a\u89c6\u56fe\u5bf9\u5e94\u4e00\u4e2a\u9875\u9762\u3002</p> <pre><code>from fastapi_amis.core.views import AmisView\nfrom fastapi_amis.amis.components import Page\n\nclass UserListView(AmisView):\n    page_schema = \"\u7528\u6237\u5217\u8868\"  # \u9875\u9762\u63cf\u8ff0\n    url = \"/users\"           # \u8bbf\u95ee\u8def\u5f84\n\n    page = Page(             # \u9875\u9762\u914d\u7f6e\n        title=\"\u7528\u6237\u7ba1\u7406\",\n        body={...}\n    )\n</code></pre> <p>\u5c5e\u6027\u8bf4\u660e\uff1a</p> <ul> <li><code>page_schema</code>: \u9875\u9762\u7684\u6587\u5b57\u63cf\u8ff0</li> <li><code>url</code>: \u9875\u9762\u7684\u8bbf\u95ee\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e\u8def\u7531\u5668\uff09</li> <li><code>page</code>: Amis Page \u7ec4\u4ef6\u5b9e\u4f8b</li> </ul>"},{"location":"guide/concepts/#amis","title":"Amis \u7ec4\u4ef6","text":"<p>FastAPI Amis \u5c01\u88c5\u4e86 Amis \u7684\u7ec4\u4ef6\uff0c\u4f7f\u5176\u66f4\u6613\u4e8e\u5728 Python \u4e2d\u4f7f\u7528\u3002</p>"},{"location":"guide/concepts/#page-","title":"Page - \u9875\u9762","text":"<p>\u9875\u9762\u662f\u6700\u9876\u5c42\u7684\u7ec4\u4ef6\uff1a</p> <pre><code>from fastapi_amis.amis.components import Page\n\npage = Page(\n    title=\"\u9875\u9762\u6807\u9898\",\n    body=[\n        # \u9875\u9762\u5185\u5bb9\n    ]\n)\n</code></pre>"},{"location":"guide/concepts/#_4","title":"\u5e38\u7528\u7ec4\u4ef6","text":"<pre><code># CRUD \u8868\u683c\n{\n    \"type\": \"crud\",\n    \"api\": \"/api/users\",\n    \"columns\": [...]\n}\n\n# \u8868\u5355\n{\n    \"type\": \"form\",\n    \"api\": \"post:/api/users\",\n    \"body\": [...]\n}\n\n# \u5361\u7247\n{\n    \"type\": \"card\",\n    \"header\": {\"title\": \"\u6807\u9898\"},\n    \"body\": \"\u5185\u5bb9\"\n}\n</code></pre>"},{"location":"guide/concepts/#_5","title":"\u6570\u636e\u6d41","text":""},{"location":"guide/concepts/#1","title":"1. \u8bf7\u6c42\u6d41\u7a0b","text":"<pre><code>\u7528\u6237\u8bf7\u6c42 \u2192 FastAPI \u8def\u7531 \u2192 AmisView \u2192 \u6e32\u67d3 Page \u2192 \u8fd4\u56de HTML/JSON\n</code></pre>"},{"location":"guide/concepts/#2-api","title":"2. API \u4ea4\u4e92","text":"<pre><code>\u524d\u7aef Amis \u2192 API \u8bf7\u6c42 \u2192 FastAPI \u7aef\u70b9 \u2192 \u8fd4\u56de JSON \u2192 \u66f4\u65b0 UI\n</code></pre>"},{"location":"guide/concepts/#3-api","title":"3. API \u54cd\u5e94\u683c\u5f0f","text":"<p>Amis \u8981\u6c42\u7279\u5b9a\u7684 JSON \u683c\u5f0f\uff1a</p> <pre><code>{\n    \"status\": 0,        # 0=\u6210\u529f, \u975e0=\u5931\u8d25\n    \"msg\": \"ok\",        # \u6d88\u606f\n    \"data\": {           # \u6570\u636e\n        \"items\": [...], # \u5217\u8868\u6570\u636e\n        \"total\": 100    # \u603b\u6570\uff08\u5206\u9875\u7528\uff09\n    }\n}\n</code></pre>"},{"location":"guide/concepts/#_6","title":"\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"guide/concepts/#_7","title":"\u5178\u578b\u7684\u5f00\u53d1\u6d41\u7a0b","text":"<ol> <li>\u521b\u5efa FastAPI \u5e94\u7528</li> </ol> <pre><code>from fastapi import FastAPI\napp = FastAPI()\n</code></pre> <ol> <li>\u521b\u5efa\u7ad9\u70b9</li> </ol> <pre><code>from fastapi_amis.core.site import AmisSite\nsite = AmisSite(title=\"\u7ba1\u7406\u540e\u53f0\")\n</code></pre> <ol> <li>\u521b\u5efa\u8def\u7531\u5668</li> </ol> <pre><code>from fastapi_amis.core.router import AmisViewRouter\nrouter = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\", type=\"page\")\n</code></pre> <ol> <li>\u521b\u5efa\u89c6\u56fe</li> </ol> <pre><code>from fastapi_amis.core.views import AmisView\n\n@router.register\nclass UserListView(AmisView):\n    page_schema = \"\u7528\u6237\u5217\u8868\"\n    url = \"/users\"\n    page = Page(...)\n</code></pre> <ol> <li>\u6ce8\u518c\u8def\u7531</li> </ol> <pre><code>site.add_router(router)\n</code></pre> <ol> <li>\u6302\u8f7d\u7ad9\u70b9</li> </ol> <pre><code>site.mount_to_app(app)\n</code></pre> <ol> <li>\u8fd0\u884c\u5e94\u7528</li> </ol> <pre><code>import uvicorn\nuvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre>"},{"location":"guide/concepts/#_8","title":"\u8def\u7531\u7ed3\u6784","text":""},{"location":"guide/concepts/#url","title":"URL \u6620\u5c04","text":"<p>\u5047\u8bbe\u4f60\u6709\u4ee5\u4e0b\u914d\u7f6e\uff1a</p> <pre><code>site = AmisSite()\nuser_router = AmisViewRouter(name=\"users\")\n\n@user_router.register\nclass UserListView(AmisView):\n    url = \"/list\"\n</code></pre> <p>\u5b9e\u9645\u7684\u8bbf\u95ee\u8def\u5f84\u4e3a\uff1a</p> <ul> <li>\u524d\u7aef\u9875\u9762\uff1a<code>/</code> \uff08\u7ad9\u70b9\u9996\u9875\uff09</li> <li>\u89c6\u56fe\u9875\u9762\uff1a<code>/list</code> \uff08\u901a\u8fc7\u524d\u7aef\u8def\u7531\u8bbf\u95ee\uff09</li> </ul>"},{"location":"guide/concepts/#api","title":"API \u7aef\u70b9","text":"<p>\u4f60\u9700\u8981\u5355\u72ec\u521b\u5efa API \u7aef\u70b9\uff1a</p> <pre><code>@app.get(\"/api/users\")\nasync def get_users():\n    return {\n        \"status\": 0,\n        \"msg\": \"ok\",\n        \"data\": {\"items\": [...], \"total\": 100}\n    }\n</code></pre>"},{"location":"guide/concepts/#_9","title":"\u4f9d\u8d56\u6ce8\u5165","text":"<p>FastAPI Amis \u5b8c\u5168\u652f\u6301 FastAPI \u7684\u4f9d\u8d56\u6ce8\u5165\u7cfb\u7edf\uff1a</p> <pre><code>from fastapi import Depends\n\ndef get_current_user():\n    return {\"id\": 1, \"name\": \"\u5f20\u4e09\"}\n\n@router.register\nclass UserProfileView(AmisView):\n    page_schema = \"\u4e2a\u4eba\u8d44\u6599\"\n    url = \"/profile\"\n    dependencies = [Depends(get_current_user)]\n    page = Page(...)\n</code></pre>"},{"location":"guide/concepts/#_10","title":"\u5f02\u6b65\u652f\u6301","text":"<p>FastAPI Amis \u5b8c\u5168\u652f\u6301\u5f02\u6b65\u7f16\u7a0b\uff1a</p> <pre><code>@app.get(\"/api/users\")\nasync def get_users():\n    users = await db.fetch_users()\n    return {\"status\": 0, \"data\": {\"items\": users}}\n</code></pre>"},{"location":"guide/concepts/#_11","title":"\u7c7b\u578b\u7cfb\u7edf","text":"<p>FastAPI Amis \u4f7f\u7528 Pydantic \u8fdb\u884c\u6570\u636e\u9a8c\u8bc1\uff1a</p> <pre><code>from pydantic import BaseModel\n\nclass User(BaseModel):\n    id: int\n    name: str\n    email: str\n\n@app.post(\"/api/users\")\nasync def create_user(user: User):\n    # user \u5df2\u7ecf\u8fc7\u9a8c\u8bc1\n    return {\"status\": 0, \"data\": user.dict()}\n</code></pre>"},{"location":"guide/concepts/#_12","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u89c6\u56fe\u548c\u8def\u7531 - \u6df1\u5165\u4e86\u89e3\u89c6\u56fe\u548c\u8def\u7531</li> <li>Amis \u7ec4\u4ef6 - \u5b66\u4e60\u4f7f\u7528 Amis \u7ec4\u4ef6</li> <li>\u7ad9\u70b9\u914d\u7f6e - \u914d\u7f6e\u4f60\u7684\u7ad9\u70b9</li> </ul>"},{"location":"guide/site-configuration/","title":"\u7ad9\u70b9\u914d\u7f6e","text":"<p><code>AmisSite</code> \u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u914d\u7f6e\u9009\u9879\uff0c\u8ba9\u4f60\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7ba1\u7406\u540e\u53f0\u7684\u5916\u89c2\u548c\u884c\u4e3a\u3002</p>"},{"location":"guide/site-configuration/#_2","title":"\u57fa\u7840\u914d\u7f6e","text":""},{"location":"guide/site-configuration/#_3","title":"\u521b\u5efa\u7ad9\u70b9","text":"<pre><code>from fastapi_amis.core.site import AmisSite\n\nsite = AmisSite(\n    title=\"\u6211\u7684\u7ba1\u7406\u540e\u53f0\",\n    logo=\"https://example.com/logo.png\"\n)\n</code></pre>"},{"location":"guide/site-configuration/#_4","title":"\u5e38\u7528\u53c2\u6570","text":"<pre><code>site = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",              # \u7ad9\u70b9\u6807\u9898\n    logo=\"https://...\",           # Logo URL\n    favicon=\"https://...\",        # \u7f51\u7ad9\u56fe\u6807\n    description=\"\u7cfb\u7edf\u63cf\u8ff0\",        # \u7ad9\u70b9\u63cf\u8ff0\n    theme=\"cxd\"                   # \u4e3b\u9898\u540d\u79f0\n)\n</code></pre>"},{"location":"guide/site-configuration/#_5","title":"\u4e3b\u9898\u914d\u7f6e","text":"<p>Amis \u63d0\u4f9b\u4e86\u591a\u4e2a\u5185\u7f6e\u4e3b\u9898\uff1a</p> <pre><code># \u9ed8\u8ba4\u4e3b\u9898\nsite = AmisSite(theme=\"cxd\")\n\n# \u6697\u9ed1\u4e3b\u9898\nsite = AmisSite(theme=\"dark\")\n\n# \u79fb\u52a8\u7aef\u4e3b\u9898\nsite = AmisSite(theme=\"antd\")\n</code></pre>"},{"location":"guide/site-configuration/#_6","title":"\u81ea\u5b9a\u4e49\u4e3b\u9898\u8272","text":"<pre><code>site = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",\n    theme={\n        \"className\": \"my-theme\",\n        \"colors\": {\n            \"primary\": \"#007bff\",\n            \"success\": \"#28a745\",\n            \"warning\": \"#ffc107\",\n            \"danger\": \"#dc3545\",\n            \"info\": \"#17a2b8\"\n        }\n    }\n)\n</code></pre>"},{"location":"guide/site-configuration/#_7","title":"\u5bfc\u822a\u914d\u7f6e","text":""},{"location":"guide/site-configuration/#_8","title":"\u4fa7\u8fb9\u680f\u5bfc\u822a","text":"<pre><code># \u6dfb\u52a0\u8def\u7531\u5668\u5230\u7ad9\u70b9\nuser_router = AmisViewRouter(\n    name=\"\u7528\u6237\u7ba1\u7406\",\n    icon=\"fa fa-users\"\n)\nsite.add_router(user_router)\n\nsystem_router = AmisViewRouter(\n    name=\"\u7cfb\u7edf\u8bbe\u7f6e\",\n    icon=\"fa fa-cog\"\n)\nsite.add_router(system_router)\n</code></pre>"},{"location":"guide/site-configuration/#_9","title":"\u5bfc\u822a\u4f4d\u7f6e","text":"<pre><code>site = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",\n    asideResizor=True,        # \u5141\u8bb8\u8c03\u6574\u4fa7\u8fb9\u680f\u5927\u5c0f\n    asideSticky=True,         # \u4fa7\u8fb9\u680f\u56fa\u5b9a\n    asideMinified=False,      # \u9ed8\u8ba4\u662f\u5426\u6536\u8d77\u4fa7\u8fb9\u680f\n)\n</code></pre>"},{"location":"guide/site-configuration/#_10","title":"\u9876\u90e8\u5bfc\u822a","text":"<pre><code>site = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",\n    header={\n        \"title\": \"\u7ba1\u7406\u540e\u53f0\",\n        \"logo\": \"https://...\",\n        \"body\": [\n            {\n                \"type\": \"tpl\",\n                \"tpl\": '&lt;div class=\"ml-auto\"&gt;\u7528\u6237\uff1aAdmin&lt;/div&gt;'\n            }\n        ]\n    }\n)\n</code></pre>"},{"location":"guide/site-configuration/#_11","title":"\u9875\u9762\u5e03\u5c40","text":""},{"location":"guide/site-configuration/#_12","title":"\u5e03\u5c40\u6a21\u5f0f","text":"<pre><code># \u4fa7\u8fb9\u680f\u5e03\u5c40\uff08\u9ed8\u8ba4\uff09\nsite = AmisSite(layout=\"aside\")\n\n# \u9876\u90e8\u5bfc\u822a\u5e03\u5c40\nsite = AmisSite(layout=\"header\")\n\n# \u6df7\u5408\u5e03\u5c40\nsite = AmisSite(layout=\"auto\")\n</code></pre>"},{"location":"guide/site-configuration/#_13","title":"\u5185\u5bb9\u533a\u57df","text":"<pre><code>site = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",\n    body={\n        \"type\": \"page\",\n        \"className\": \"custom-page\",\n        \"body\": [\n            # \u9875\u9762\u5185\u5bb9\n        ]\n    }\n)\n</code></pre>"},{"location":"guide/site-configuration/#_14","title":"\u6302\u8f7d\u914d\u7f6e","text":""},{"location":"guide/site-configuration/#fastapi","title":"\u6302\u8f7d\u5230 FastAPI","text":"<pre><code>from fastapi import FastAPI\n\napp = FastAPI()\n\n# \u9ed8\u8ba4\u6302\u8f7d\u5230\u6839\u8def\u5f84\nsite.mount_to_app(app)\n\n# \u6302\u8f7d\u5230\u6307\u5b9a\u8def\u5f84\nsite.mount_to_app(app, prefix=\"/admin\")\n</code></pre>"},{"location":"guide/site-configuration/#_15","title":"\u591a\u7ad9\u70b9\u6302\u8f7d","text":"<pre><code># \u524d\u53f0\u7ad9\u70b9\nfrontend_site = AmisSite(title=\"\u524d\u53f0\u7cfb\u7edf\")\nfrontend_site.mount_to_app(app, prefix=\"/\")\n\n# \u540e\u53f0\u7ad9\u70b9\nadmin_site = AmisSite(title=\"\u540e\u53f0\u7ba1\u7406\")\nadmin_site.mount_to_app(app, prefix=\"/admin\")\n</code></pre>"},{"location":"guide/site-configuration/#_16","title":"\u9ad8\u7ea7\u914d\u7f6e","text":""},{"location":"guide/site-configuration/#_17","title":"\u81ea\u5b9a\u4e49\u9875\u9762\u6a21\u677f","text":"<p>FastAPI Amis \u4f7f\u7528 Jinja2 \u6a21\u677f\uff0c\u4f60\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6a21\u677f\uff1a</p> <pre><code>site = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",\n    template_path=\"/path/to/templates\",  # \u81ea\u5b9a\u4e49\u6a21\u677f\u76ee\u5f55\n    template_name=\"my_template.html\"     # \u81ea\u5b9a\u4e49\u6a21\u677f\u6587\u4ef6\n)\n</code></pre>"},{"location":"guide/site-configuration/#api","title":"API \u524d\u7f00","text":"<pre><code>site = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",\n    api_prefix=\"/api/v1\"  # API \u8def\u5f84\u524d\u7f00\n)\n</code></pre>"},{"location":"guide/site-configuration/#_18","title":"\u9759\u6001\u8d44\u6e90","text":"<pre><code>site = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",\n    static_path=\"/static\",      # \u9759\u6001\u6587\u4ef6\u8def\u5f84\n    static_url=\"/static\"        # \u9759\u6001\u6587\u4ef6 URL\n)\n</code></pre>"},{"location":"guide/site-configuration/#_19","title":"\u56fd\u9645\u5316","text":""},{"location":"guide/site-configuration/#_20","title":"\u8bbe\u7f6e\u8bed\u8a00","text":"<pre><code>site = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",\n    locale=\"zh-CN\"  # \u4e2d\u6587\n    # locale=\"en-US\"  # \u82f1\u6587\n)\n</code></pre>"},{"location":"guide/site-configuration/#_21","title":"\u81ea\u5b9a\u4e49\u7ffb\u8bd1","text":"<pre><code>site = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",\n    locale=\"zh-CN\",\n    translations={\n        \"zh-CN\": {\n            \"save\": \"\u4fdd\u5b58\",\n            \"cancel\": \"\u53d6\u6d88\",\n            \"confirm\": \"\u786e\u5b9a\"\n        }\n    }\n)\n</code></pre>"},{"location":"guide/site-configuration/#_22","title":"\u6743\u9650\u914d\u7f6e","text":""},{"location":"guide/site-configuration/#_23","title":"\u5168\u5c40\u6743\u9650\u68c0\u67e5","text":"<pre><code>from fastapi import Depends\n\ndef check_auth(request: Request):\n    \"\"\"\u5168\u5c40\u6743\u9650\u68c0\u67e5\"\"\"\n    if not request.state.user:\n        raise HTTPException(status_code=401)\n\nsite = AmisSite(\n    title=\"\u7ba1\u7406\u540e\u53f0\",\n    dependencies=[Depends(check_auth)]\n)\n</code></pre>"},{"location":"guide/site-configuration/#_24","title":"\u8def\u7531\u7ea7\u6743\u9650","text":"<pre><code>def require_admin():\n    def dependency(request: Request):\n        if not request.state.user.is_admin:\n            raise HTTPException(status_code=403)\n    return Depends(dependency)\n\nadmin_router = AmisViewRouter(\n    name=\"\u7ba1\u7406\u5458\",\n    dependencies=[require_admin()]\n)\n</code></pre>"},{"location":"guide/site-configuration/#_25","title":"\u5b8c\u6574\u914d\u7f6e\u793a\u4f8b","text":"<pre><code>from fastapi import FastAPI, Depends\nfrom fastapi_amis.core.site import AmisSite\nfrom fastapi_amis.core.router import AmisViewRouter\n\napp = FastAPI()\n\n# \u521b\u5efa\u7ad9\u70b9\nsite = AmisSite(\n    # \u57fa\u7840\u914d\u7f6e\n    title=\"\u4f01\u4e1a\u7ba1\u7406\u7cfb\u7edf\",\n    logo=\"https://example.com/logo.png\",\n    favicon=\"https://example.com/favicon.ico\",\n    description=\"\u4f01\u4e1a\u5185\u90e8\u7ba1\u7406\u7cfb\u7edf\",\n\n    # \u4e3b\u9898\u914d\u7f6e\n    theme=\"cxd\",\n\n    # \u5e03\u5c40\u914d\u7f6e\n    layout=\"aside\",\n    asideResizor=True,\n    asideSticky=True,\n\n    # \u9876\u90e8\u914d\u7f6e\n    header={\n        \"title\": \"\u4f01\u4e1a\u7ba1\u7406\u7cfb\u7edf\",\n        \"logo\": \"https://example.com/logo.png\",\n        \"body\": [\n            {\n                \"type\": \"dropdown-button\",\n                \"label\": \"${user.name}\",\n                \"className\": \"ml-auto\",\n                \"trigger\": \"hover\",\n                \"buttons\": [\n                    {\n                        \"type\": \"button\",\n                        \"label\": \"\u4e2a\u4eba\u8bbe\u7f6e\",\n                        \"actionType\": \"link\",\n                        \"link\": \"/profile\"\n                    },\n                    {\n                        \"type\": \"button\",\n                        \"label\": \"\u9000\u51fa\u767b\u5f55\",\n                        \"actionType\": \"ajax\",\n                        \"api\": \"post:/api/logout\"\n                    }\n                ]\n            }\n        ]\n    },\n\n    # API \u914d\u7f6e\n    api_prefix=\"/api\",\n\n    # \u56fd\u9645\u5316\n    locale=\"zh-CN\"\n)\n\n# \u521b\u5efa\u8def\u7531\ndashboard_router = AmisViewRouter(\n    name=\"\u4eea\u8868\u76d8\",\n    icon=\"fa fa-dashboard\"\n)\n\nuser_router = AmisViewRouter(\n    name=\"\u7528\u6237\u7ba1\u7406\",\n    icon=\"fa fa-users\"\n)\n\nsystem_router = AmisViewRouter(\n    name=\"\u7cfb\u7edf\u8bbe\u7f6e\",\n    icon=\"fa fa-cog\"\n)\n\n# \u6dfb\u52a0\u8def\u7531\nsite.add_router(dashboard_router)\nsite.add_router(user_router)\nsite.add_router(system_router)\n\n# \u6302\u8f7d\u5230\u5e94\u7528\nsite.mount_to_app(app, prefix=\"/admin\")\n</code></pre>"},{"location":"guide/site-configuration/#_26","title":"\u73af\u5883\u53d8\u91cf\u914d\u7f6e","text":"<p>\u63a8\u8350\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u7ba1\u7406\u914d\u7f6e\uff1a</p> <pre><code>import os\nfrom pydantic_settings import BaseSettings\n\nclass Settings(BaseSettings):\n    app_title: str = \"\u7ba1\u7406\u540e\u53f0\"\n    app_logo: str = \"\"\n    app_theme: str = \"cxd\"\n\n    class Config:\n        env_file = \".env\"\n\nsettings = Settings()\n\nsite = AmisSite(\n    title=settings.app_title,\n    logo=settings.app_logo,\n    theme=settings.app_theme\n)\n</code></pre> <p><code>.env</code> \u6587\u4ef6\uff1a</p> <pre><code>APP_TITLE=\u6211\u7684\u7ba1\u7406\u540e\u53f0\nAPP_LOGO=https://example.com/logo.png\nAPP_THEME=cxd\n</code></pre>"},{"location":"guide/site-configuration/#_27","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>API \u53c2\u8003 - \u67e5\u770b\u5b8c\u6574\u7684 API \u6587\u6863</li> <li>\u6700\u4f73\u5b9e\u8df5 - \u5f00\u53d1\u5efa\u8bae</li> <li>\u793a\u4f8b\u9879\u76ee - \u67e5\u770b\u5b9e\u9645\u5e94\u7528</li> </ul>"},{"location":"guide/views-and-routers/","title":"\u89c6\u56fe\u548c\u8def\u7531","text":"<p>\u89c6\u56fe\u548c\u8def\u7531\u662f FastAPI Amis \u7684\u6838\u5fc3\u6982\u5ff5\uff0c\u672c\u6587\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\u3002</p>"},{"location":"guide/views-and-routers/#amisviewrouter","title":"AmisViewRouter","text":"<p>\u8def\u7531\u5668\u7528\u4e8e\u7ec4\u7ec7\u76f8\u5173\u7684\u89c6\u56fe\uff0c\u901a\u5e38\u5bf9\u5e94\u4fa7\u8fb9\u680f\u7684\u4e00\u4e2a\u83dc\u5355\u9879\u3002</p>"},{"location":"guide/views-and-routers/#_2","title":"\u57fa\u672c\u7528\u6cd5","text":"<pre><code>from fastapi_amis.core.router import AmisViewRouter\n\nrouter = AmisViewRouter(\n    name=\"\u7528\u6237\u7ba1\u7406\",      # \u663e\u793a\u540d\u79f0\n    type=\"page\",         # \u8def\u7531\u7c7b\u578b\n    icon=\"fa fa-users\"   # \u56fe\u6807\uff08\u53ef\u9009\uff09\n)\n</code></pre>"},{"location":"guide/views-and-routers/#_3","title":"\u53c2\u6570\u8bf4\u660e","text":"<ul> <li><code>name</code>: \u8def\u7531\u5668\u540d\u79f0\uff0c\u663e\u793a\u5728\u4fa7\u8fb9\u680f</li> <li><code>type</code>: \u8def\u7531\u7c7b\u578b\uff0c\u901a\u5e38\u4e3a \"page\"</li> <li><code>icon</code>: \u56fe\u6807\u7c7b\u540d\uff08Font Awesome \u6216\u81ea\u5b9a\u4e49\uff09</li> <li><code>visible</code>: \u662f\u5426\u5728\u5bfc\u822a\u4e2d\u663e\u793a\uff08\u9ed8\u8ba4 True\uff09</li> </ul>"},{"location":"guide/views-and-routers/#_4","title":"\u6ce8\u518c\u89c6\u56fe","text":"<p>\u4f7f\u7528\u88c5\u9970\u5668\u6ce8\u518c\u89c6\u56fe\uff1a</p> <pre><code>@router.register\nclass UserListView(AmisView):\n    page_schema = \"\u7528\u6237\u5217\u8868\"\n    url = \"/users\"\n    page = Page(...)\n</code></pre>"},{"location":"guide/views-and-routers/#_5","title":"\u591a\u4e2a\u8def\u7531\u5668","text":"<p>\u4e00\u4e2a\u5e94\u7528\u53ef\u4ee5\u6709\u591a\u4e2a\u8def\u7531\u5668\uff1a</p> <pre><code># \u7528\u6237\u7ba1\u7406\nuser_router = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\", type=\"page\")\n\n# \u7cfb\u7edf\u8bbe\u7f6e\nsystem_router = AmisViewRouter(name=\"\u7cfb\u7edf\u8bbe\u7f6e\", type=\"page\")\n\n# \u6dfb\u52a0\u5230\u7ad9\u70b9\nsite.add_router(user_router)\nsite.add_router(system_router)\n</code></pre>"},{"location":"guide/views-and-routers/#amisview","title":"AmisView","text":"<p>\u89c6\u56fe\u662f\u9875\u9762\u7684\u62bd\u8c61\uff0c\u6bcf\u4e2a\u89c6\u56fe\u5bf9\u5e94\u4e00\u4e2a\u9875\u9762\u3002</p>"},{"location":"guide/views-and-routers/#_6","title":"\u57fa\u672c\u7ed3\u6784","text":"<pre><code>from fastapi_amis.core.views import AmisView\nfrom fastapi_amis.amis.components import Page\n\nclass MyView(AmisView):\n    # \u9875\u9762\u63cf\u8ff0\n    page_schema = \"\u6211\u7684\u9875\u9762\"\n\n    # \u8bbf\u95ee\u8def\u5f84\n    url = \"/my-page\"\n\n    # \u9875\u9762\u914d\u7f6e\n    page = Page(\n        title=\"\u9875\u9762\u6807\u9898\",\n        body=[...]\n    )\n</code></pre>"},{"location":"guide/views-and-routers/#_7","title":"\u5fc5\u9700\u5c5e\u6027","text":"<ul> <li><code>page_schema</code>: \u9875\u9762\u7684\u6587\u5b57\u63cf\u8ff0</li> <li><code>url</code>: \u9875\u9762\u7684\u8bbf\u95ee\u8def\u5f84</li> <li><code>page</code>: Amis Page \u7ec4\u4ef6\u5b9e\u4f8b</li> </ul>"},{"location":"guide/views-and-routers/#_8","title":"\u53ef\u9009\u5c5e\u6027","text":"<ul> <li><code>icon</code>: \u9875\u9762\u56fe\u6807</li> <li><code>visible</code>: \u662f\u5426\u5728\u5bfc\u822a\u4e2d\u663e\u793a</li> <li><code>dependencies</code>: FastAPI \u4f9d\u8d56\u9879</li> </ul>"},{"location":"guide/views-and-routers/#_9","title":"\u52a8\u6001\u9875\u9762","text":"<p>\u53ef\u4ee5\u901a\u8fc7\u65b9\u6cd5\u52a8\u6001\u751f\u6210\u9875\u9762\uff1a</p> <pre><code>class DynamicView(AmisView):\n    page_schema = \"\u52a8\u6001\u9875\u9762\"\n    url = \"/dynamic\"\n\n    def get_page(self, request):\n        \"\"\"\u6839\u636e\u8bf7\u6c42\u52a8\u6001\u751f\u6210\u9875\u9762\"\"\"\n        user = request.state.user\n        return Page(\n            title=f\"\u6b22\u8fce {user.name}\",\n            body=[...]\n        )\n</code></pre>"},{"location":"guide/views-and-routers/#_10","title":"\u9875\u9762\u7c7b\u578b","text":""},{"location":"guide/views-and-routers/#1","title":"1. \u5217\u8868\u9875\u9762","text":"<p>\u5c55\u793a\u6570\u636e\u5217\u8868\uff1a</p> <pre><code>@router.register\nclass UserListView(AmisView):\n    page_schema = \"\u7528\u6237\u5217\u8868\"\n    url = \"/users\"\n\n    page = Page(\n        title=\"\u7528\u6237\u7ba1\u7406\",\n        body={\n            \"type\": \"crud\",\n            \"api\": \"/api/users\",\n            \"columns\": [\n                {\"name\": \"id\", \"label\": \"ID\", \"type\": \"text\"},\n                {\"name\": \"name\", \"label\": \"\u59d3\u540d\", \"type\": \"text\"},\n                {\"name\": \"email\", \"label\": \"\u90ae\u7bb1\", \"type\": \"text\"},\n            ],\n            \"headerToolbar\": [\"bulkActions\", \"export\", \"filter-toggler\"],\n            \"footerToolbar\": [\"statistics\", \"pagination\"],\n        }\n    )\n</code></pre>"},{"location":"guide/views-and-routers/#2","title":"2. \u8868\u5355\u9875\u9762","text":"<p>\u521b\u5efa\u6216\u7f16\u8f91\u6570\u636e\uff1a</p> <pre><code>@router.register\nclass UserFormView(AmisView):\n    page_schema = \"\u6dfb\u52a0\u7528\u6237\"\n    url = \"/users/new\"\n\n    page = Page(\n        title=\"\u6dfb\u52a0\u7528\u6237\",\n        body={\n            \"type\": \"form\",\n            \"api\": \"post:/api/users\",\n            \"body\": [\n                {\n                    \"type\": \"input-text\",\n                    \"name\": \"name\",\n                    \"label\": \"\u59d3\u540d\",\n                    \"required\": True\n                },\n                {\n                    \"type\": \"input-email\",\n                    \"name\": \"email\",\n                    \"label\": \"\u90ae\u7bb1\",\n                    \"required\": True\n                },\n                {\n                    \"type\": \"select\",\n                    \"name\": \"role\",\n                    \"label\": \"\u89d2\u8272\",\n                    \"options\": [\n                        {\"label\": \"\u7ba1\u7406\u5458\", \"value\": \"admin\"},\n                        {\"label\": \"\u666e\u901a\u7528\u6237\", \"value\": \"user\"}\n                    ]\n                }\n            ]\n        }\n    )\n</code></pre>"},{"location":"guide/views-and-routers/#3","title":"3. \u8be6\u60c5\u9875\u9762","text":"<p>\u5c55\u793a\u5355\u6761\u6570\u636e\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a</p> <pre><code>@router.register\nclass UserDetailView(AmisView):\n    page_schema = \"\u7528\u6237\u8be6\u60c5\"\n    url = \"/users/{id}\"\n\n    page = Page(\n        title=\"\u7528\u6237\u8be6\u60c5\",\n        body={\n            \"type\": \"service\",\n            \"api\": \"/api/users/${id}\",\n            \"body\": [\n                {\n                    \"type\": \"panel\",\n                    \"title\": \"\u57fa\u672c\u4fe1\u606f\",\n                    \"body\": [\n                        {\"type\": \"static\", \"label\": \"ID\", \"name\": \"id\"},\n                        {\"type\": \"static\", \"label\": \"\u59d3\u540d\", \"name\": \"name\"},\n                        {\"type\": \"static\", \"label\": \"\u90ae\u7bb1\", \"name\": \"email\"},\n                    ]\n                }\n            ]\n        }\n    )\n</code></pre>"},{"location":"guide/views-and-routers/#4","title":"4. \u4eea\u8868\u76d8","text":"<p>\u5c55\u793a\u7edf\u8ba1\u4fe1\u606f\uff1a</p> <pre><code>@router.register\nclass DashboardView(AmisView):\n    page_schema = \"\u4eea\u8868\u76d8\"\n    url = \"/\"\n\n    page = Page(\n        title=\"\u6570\u636e\u6982\u89c8\",\n        body=[\n            {\n                \"type\": \"grid\",\n                \"columns\": [\n                    {\n                        \"body\": {\n                            \"type\": \"panel\",\n                            \"title\": \"\u7528\u6237\u603b\u6570\",\n                            \"body\": {\n                                \"type\": \"tpl\",\n                                \"tpl\": '&lt;div class=\"stat-value\"&gt;${count}&lt;/div&gt;'\n                            }\n                        }\n                    },\n                    # \u66f4\u591a\u7edf\u8ba1\u5361\u7247...\n                ]\n            },\n            {\n                \"type\": \"chart\",\n                \"api\": \"/api/stats/chart\",\n                \"config\": {\n                    \"xAxis\": {\"type\": \"category\"},\n                    \"yAxis\": {},\n                    \"series\": [{\"type\": \"line\", \"data\": []}]\n                }\n            }\n        ]\n    )\n</code></pre>"},{"location":"guide/views-and-routers/#_11","title":"\u8def\u7531\u5d4c\u5957","text":"<p>\u53ef\u4ee5\u521b\u5efa\u5d4c\u5957\u7684\u8def\u7531\u7ed3\u6784\uff1a</p> <pre><code># \u7236\u8def\u7531\nuser_router = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\", type=\"page\")\n\n# \u5b50\u89c6\u56fe\n@user_router.register\nclass UserListView(AmisView):\n    page_schema = \"\u7528\u6237\u5217\u8868\"\n    url = \"/list\"\n    page = Page(...)\n\n@user_router.register\nclass UserAddView(AmisView):\n    page_schema = \"\u6dfb\u52a0\u7528\u6237\"\n    url = \"/add\"\n    page = Page(...)\n\n@user_router.register\nclass UserEditView(AmisView):\n    page_schema = \"\u7f16\u8f91\u7528\u6237\"\n    url = \"/edit/{id}\"\n    page = Page(...)\n</code></pre>"},{"location":"guide/views-and-routers/#_12","title":"\u6743\u9650\u63a7\u5236","text":"<p>\u4f7f\u7528 FastAPI \u7684\u4f9d\u8d56\u6ce8\u5165\u8fdb\u884c\u6743\u9650\u63a7\u5236\uff1a</p> <pre><code>from fastapi import Depends, HTTPException\n\ndef require_admin(request: Request):\n    \"\"\"\u8981\u6c42\u7ba1\u7406\u5458\u6743\u9650\"\"\"\n    if not request.state.user.is_admin:\n        raise HTTPException(status_code=403, detail=\"\u6743\u9650\u4e0d\u8db3\")\n\n@router.register\nclass AdminView(AmisView):\n    page_schema = \"\u7ba1\u7406\u5458\u9875\u9762\"\n    url = \"/admin\"\n    dependencies = [Depends(require_admin)]\n    page = Page(...)\n</code></pre>"},{"location":"guide/views-and-routers/#_13","title":"\u8def\u7531\u7ec4\u7ec7","text":""},{"location":"guide/views-and-routers/#_14","title":"\u6309\u529f\u80fd\u6a21\u5757\u7ec4\u7ec7","text":"<pre><code># routers/user.py\nuser_router = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\")\n# ... \u6ce8\u518c\u7528\u6237\u76f8\u5173\u89c6\u56fe\n\n# routers/product.py\nproduct_router = AmisViewRouter(name=\"\u5546\u54c1\u7ba1\u7406\")\n# ... \u6ce8\u518c\u5546\u54c1\u76f8\u5173\u89c6\u56fe\n\n# main.py\nfrom routers.user import user_router\nfrom routers.product import product_router\n\nsite.add_router(user_router)\nsite.add_router(product_router)\n</code></pre>"},{"location":"guide/views-and-routers/#_15","title":"\u6309\u4e1a\u52a1\u9886\u57df\u7ec4\u7ec7","text":"<pre><code># \u524d\u53f0\u4e1a\u52a1\nfrontend_site = AmisSite(title=\"\u524d\u53f0\u7cfb\u7edf\")\nfrontend_site.add_router(order_router)\nfrontend_site.add_router(customer_router)\n\n# \u540e\u53f0\u7ba1\u7406\nadmin_site = AmisSite(title=\"\u540e\u53f0\u7ba1\u7406\")\nadmin_site.add_router(user_router)\nadmin_site.add_router(system_router)\n\n# \u6302\u8f7d\u5230\u4e0d\u540c\u7684\u8def\u5f84\nfrontend_site.mount_to_app(app, prefix=\"/frontend\")\nadmin_site.mount_to_app(app, prefix=\"/admin\")\n</code></pre>"},{"location":"guide/views-and-routers/#_16","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"guide/views-and-routers/#1_1","title":"1. \u547d\u540d\u89c4\u8303","text":"<pre><code># \u8def\u7531\u5668\uff1a\u4f7f\u7528\u590d\u6570\u540d\u8bcd + _router\nuser_router = AmisViewRouter(name=\"\u7528\u6237\u7ba1\u7406\")\n\n# \u89c6\u56fe\uff1a\u4f7f\u7528\u540d\u8bcd + \u52a8\u4f5c + View\nclass UserListView(AmisView): ...\nclass UserCreateView(AmisView): ...\nclass UserUpdateView(AmisView): ...\nclass UserDeleteView(AmisView): ...\n</code></pre>"},{"location":"guide/views-and-routers/#2-url","title":"2. URL \u8bbe\u8ba1","text":"<pre><code># \u5217\u8868\u9875\nurl = \"/users\"\n\n# \u521b\u5efa\u9875\nurl = \"/users/new\"\n\n# \u7f16\u8f91\u9875\nurl = \"/users/{id}/edit\"\n\n# \u8be6\u60c5\u9875\nurl = \"/users/{id}\"\n</code></pre>"},{"location":"guide/views-and-routers/#3_1","title":"3. \u4ee3\u7801\u7ec4\u7ec7","text":"<pre><code># views/user.py\nclass UserViews:\n    \"\"\"\u7528\u6237\u76f8\u5173\u89c6\u56fe\"\"\"\n\n    @staticmethod\n    def create_list_view():\n        @user_router.register\n        class UserListView(AmisView):\n            ...\n        return UserListView\n\n    @staticmethod\n    def create_form_view():\n        @user_router.register\n        class UserFormView(AmisView):\n            ...\n        return UserFormView\n</code></pre>"},{"location":"guide/views-and-routers/#_17","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>Amis \u7ec4\u4ef6 - \u5b66\u4e60\u4f7f\u7528 Amis UI \u7ec4\u4ef6</li> <li>\u7ad9\u70b9\u914d\u7f6e - \u914d\u7f6e\u7ad9\u70b9\u5916\u89c2\u548c\u884c\u4e3a</li> <li>API \u53c2\u8003 - \u67e5\u770b\u5b8c\u6574\u7684 API \u6587\u6863</li> </ul>"}]}